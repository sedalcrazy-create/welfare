مینی‌اپ‌ها در بله
با مینی‌اپ‌ها، می‌توانید قدرت و امکانات صفحات وب را به بازوهای خود بیاورید و رابط‌های کاربری پویا و انعطاف‌پذیری طراحی کنید که مستقیماً در بله اجرا شده و تجربه‌ای یکپارچه و روان برای کاربران فراهم می‌کنند. این مینی اپ‌ها می‌توانند به‌طور کامل جایگزین وب‌سایت‌ها شوند و امکان تعامل پیشرفته‌تری را در محیط بله ارائه دهند.

مثال‌ها
برای دانلود یک نمونه مثال از نحوه‌ی کار با sdk مینی‌اپ، اینجا کلیک کنید.

راهنمای طراحی
این راهنما، به هدف یکپارچگی بیشتر مینی‌اپ‌ها، ارائه یک تجربهٔ خوب به کاربران و در نتیجه بالا رفتن تعداد کاربر بازو در نظر گرفته شده است. در طراحی مینی‌اپ‌ها به این نکات توجه کنید:

همه عناصر موجود در مینی‌اپ باید پاسخگو (Responsive) باشند. به این معنی که با ابعاد دستگاه‌های مختلف (موبایل، تبلت، لپ‌تاپ) هماهنگ بوده و کاربران بدون توجه به بزرگ یا کوچک بودن نمایشگر، بتوانند به‌راحتی و به‌طور کامل مینی‌اپ را ببینند.
عناصر موجود در مینی‌اپ با رویکرد موبایل محور (mobile-first) طراحی شوند. به این معنی که ابتدا با در نظر گرفتن صفحۀ نمایش کوچکتر (موبایل) طراحی کنید و توسعه دهید و بعد از آن برای صفحه‌های نمایش بزرگ‌تر طراحی کنید (وب و …).
در صورت استفاده از انیمیشن، باید روان و در حالت ایده‌آل ۶۰ فریم بر ثانیه باشند. انیمیشن‌ها و جلوه‌های بصری را در دستگاه‌های با کارایی پایین به حداقل برسانید تا از عملکرد روان مینی‌اپ در آن دستگاه‌ها اطمینان داشته باشید.
در انتخاب رنگ عناصر مینی‌اپ به تم تیره و روشن دستگاه کاربر توجه شود.
عرض دکمهٔ مینی‌اپ در اینپوت بار بازو برای اندروید حداکثر می‌تواند ۲۰ کاراکتر باشد.
در صفحه‌های داخلی دکمهٔ «بازگشت» فراموش نشود.
خطاهایی که ممکن است به کاربر نشان داده شود، را در نظر بگیرید (Error Handling). متن خطا باید گویا و قابل فهم باشد و کاربر را برای اقدام بعدی راهنمایی کند.
دسترسی به مینی‌اپ‌ها
در حال حاضر از چهار روش برای اجرای مینی‌اپ‌ها در بله پشتیبانی می‌کنیم؛ مینی‌اپ اصلی، دکمه منوی بازو، دکمه اینلاین و دکمه صفحه‌کلید ریپلای.

accessing mini apps

accessing main mini app

مینی‌اپ اصلی
مینی‌اپ اصلی به شما اجازه می‌دهد که یک آدرس مشخص را به عنوان نقطه ورود اصلی برای کاربران خود تعیین کنید. هر بازو یک مینی‌اپ اصلی دارد که می‌توانید با مراجعه به @botfather آن را فعال کنید.

برای ورود به مینی‌اپ اصلی، کاربران نیازی به شروع گفتگو با بازوی شما ندارند و می‌توانند از طریق پیوند مستقیم، صفحه جستجو و صفحه پروفایل بازو به آن وارد شوند. علاوه بر این موارد، از صفحه گفتگوها نیز دکمه مینی‌اپ اصلی در دسترس است. این ویژگی‌هابه کاربران اجازه می‌دهند دسترسی به مراتب ساده و سریع‌تری به مینی‌اپ بازوی شما داشته باشند.

پیوند مستقیم
کاربران می‌توانند از هر جایی با کلیک روی پیوندی در قالب زیر، مستقیم وارد مینی‌اپ اصلی شود؛

https://ble.ir/<bot_username>?startapp
https://ble.ir/<bot_username>?startapp=<start_param>
اگر پارامتر startapp در پیوند به‌صورت غیرخالی مقداردهی شده باشد، این مقدار به مینی‌اپ منتقل شده و در قالب query با نام tgWebAppStartParam در دسترس خواهد بود.

مینی‌اپ در دکمه منو بازو
در گفتگوی شخصی با بازوها، همیشه دکمه‌ای کاربردی کنار نوار ورودی قرار دارد که دسترسی سریع به دستورهای بازو را فراهم می‌کند. با مراجعه به @botfather می‌توانید عملکرد این دکمه را تغییر دهید تا پیوند ثابتی را در قالب مینی‌اپ باز کند و متن دلخواه شما را نمایش دهد.

مینی‌اپ در پیام‌ها
با استفاده از فیلد web_app در InlineKeyboardButton می‌توانید هر پیوندی را در دکمه زیر پیام‌ها قرار دهید تا در قالب مینی‌اپ باز شود.

همچنین با استفاده از فیلد مشابه web_app در KeyboardButton می‌توانید هر پیوندی را در دکمه صفحه‌کلید، همراه پیام‌ها قرار دهید تا در قالب مینی‌اپ باز شود.

پیاده‌سازی مینی‌اپ‌ها
همانطور که گفته شد، مینی‌اپ‌ها قابلیت استفاده از تمام امکانات صفحات وب را دارا هستند. این قابلیت‌ها حتی شامل مواردی مانند کسب اجازه برای دسترسی به میکروفون، دوربین و موقعیت مکانی می‌باشند. اما ويژگی اصلی مینی‌اپ، ارتباط با اپلیکیشن بله و تعامل با کاربرها از طریق آن می‌باشد. برای برقراری ارتباط مینی‌اپ‌تان با کلاینت بله، script زیر را قبل از هر script دیگری در ابتدای <head> فایل اصلی html خود قرار دهید:

<script src="https://tapi.bale.ai/miniapp.js?3"></script>
با اجرای این کد، شیء window.Bale.WebApp با ویژگی‌هایی که در ادامه توضیح داده شدند، ایجاد خواهد شد.

WebApp
فیلد	نسخه	نوع	توضیحات
initData	1.0	String	یک رشته که حاوی داده خام ارسال شده به مینی‌اپ است و می‌توان از آن برای اعتبارسنجی داده‌ها استفاده کرد.
initDataUnsafe	1.0	WebAppInitData	شی‌ای شامل داده‌های ورودی منتقل‌شده به مینی اپ.
هشدار: این داده‌ها را تنها پس از اعتبارسنجی در سرور بازو استفاده کنید، زیرا ممکن است دارای مقادیر قدیمی یا جعلی باشند.
version	1.0	String	نسخه‌ای از API مینی‌اپ که کلاینت کاربر از آن پشتیبانی می‌کند.
isIframe	1.0	Boolean	نشان‌دهنده‌ پلتفرمی که از طریق آن مینی‌اپ باز شده است. اگر true باشد یعنی از وب باز شده است و اگر false باشد، یعنی از اندروید باز شده است
themeParams	1.0	ThemeParams	شی‌ای شامل اطلاعات تم استفاده‌شده فعلی در اپلیکیشن بله.
isClosingConfirmationEnabled	1.0	Boolean	مقدار true اگر دیالوگ تأیید برای بستن مینی اپ فعال باشد، مقدار false اگر غیرفعال باشد.
BackButton	1.0	BackButton	آبجکتی برای کنترل دکمه برگشت که می‌تواند در هدر مینی‌اپ در رابط کاربری بله نمایش داده شود.
SettingsButton	1.0	SettingsButton	آبجکتی برای کنترل گزینه‌ی تنظیمات در منوی زمینه‌ی مینی‌اپ در رابط کاربری بله.
colorScheme	1.0	String	نشان‌دهنده‌ی تم کاربر در اپلیکیشن بله است؛ مقدار light برای تم روشن و dark برای تم تاریک.
isMiniAppSupported	1.0	Boolean	نشان‌دهنده‌ی پشتیبانی شدن مینی‌اپ در اپلیکیشن بله کاربر است.
متدها
در این قسمت تمام متدهایی قابل استفاده شیء WebApp توضیح داده شده است. این متدها به شما این امکان را می‌دهند که بتوانید با اپلیکیشن بله و خارج از مینی‌اپ خود، ارتباط برقرار کنید. همچنین در نتیجه‌ی صدا زدن این متدها ممکن است برخی از Eventها رخ بدهند. اگر اپلیکیشن کاربر نسخه پایینتری از مینی‌اپ را داشته باشد، با صدا زدن متد مربوط به نسخه بالاتر، اتفاقی نخواهد افتاد.

نام	نسخه	توضیحات
openLink(url, options)	1.0	با این متد می‌توانید یک پیوند را در مرورگر داخلی بله یا مرورگر پیش‌فرض دستگاه کاربر باز کنید.
اگر پارامتر اختیاری options دارای فیلد try_instant_view با مقدار true باشد، پیوند در مرورگر داخلی بله باز می‌شود.
addToHomeScreen()	1.0	متدی برای نمایش درخواست اضافه کردن میانبر مینی‌اپ به صفحه اصلی دستگاه.
checkHomeScreenStatus(callback)	1.0	این متد بررسی می‌کند که آیا امکان افزودن میانبر مینی‌اپ به صفحه اصلی وجود دارد یا نه. همچنین بررسی می‌کند که میانبر قبلاً به صفحه اصلی اضافه شده است یا خیر. اگر تابع callback به عنوان پارامتر اختیاری داده شده باشد، با یک آرگومان status فراخوانی می‌شود که یک رشته حاوی وضعیت صفحه اصلی است. مقادیر ممکن برای status عبارتند از:
- unsupported – قابلیت افزودن میانبر به صفحه اصلی وجود ندارد.
- unknown – این قابلیت پشتیبانی می‌شود و امکان افزودن میانبر وجود دارد، اما نمی‌توان تعیین کرد که آیا میانبر قبلاً اضافه شده است یا خیر.
- added – میانبر قبلاً به صفحه اصلی اضافه شده است،
- missed – میانبر به صفحه اصلی اضافه نشده است.
requestContact(callback)	1.0	فراخوانی این متد یک دیالوگ به کاربر نمایش می‌دهد و از او درخواست دسترسی به شماره تلفن می‌کند. اگر پارامتر اختیاری callback داده شده باشد، تابع callback هنگام بسته شدن دیالوگ، فراخوانی می‌شود؛ آرگومان اول یک مقدار boolean خواهد بود که نشان می‌دهد آیا کاربر شماره تلفن خود را به اشتراک گذاشته است یا خیر و آرگومان دوم، شماره تلفن همراه کاربر است
enableClosingConfirmation()	1.0	متدی برای فعال‌سازی دیالوگ تأیید بستن مینی اپ.
disableClosingConfirmation()	1.0	متدی برای غیرفعال‌سازی دیالوگ تأیید بستن مینی اپ.
onEvent(eventType, eventHandler)	1.0	با استفاده از این متد می‌توانید برای دریافت رویدادهای مختلفی که مینی‌اپ دریافت می‌کند، یک یا چند تابع (eventHandler) ثبت کند. فهرست تمام رویدادها را می‌توانید اینجا مشاهده کنید.
offEvent(eventType, eventHandler)	1.0	متدی برای حذف یک event handler که قبلاً ثبت شده است.
ready()	1.0	این متد به بله اطلاع می‌دهد که مینی‌اپ آماده نمایش است. پس از فراخوانی این متد، حالت بارگذاری به اتمام رسیده و مینی‌اپ نمایش داده می‌شود. اگر این متد فراخوانی نشود، حالت بارگذاری تنها زمانی به اتمام می‌رسد که صفحه به طور کامل بارگیری شود.
توصیه می‌کنیم این متد را در سریع‌ترین زمان ممکن و پس از بارگیری تمام عناصر ضروری رابط کاربری، فراخوانی کنید. همچنین می‌توانید پس از فراخوانی این متد، بارگذاری شخصی‌سازی شده مینی‌اپ خود را نمایش دهید.
expand()	1.0	با فراخوانی این متد، مینی‌اپ در حالت تمام‌صفحه نمایش داده می‌شود.
close()	1.0	متدی برای بستن مینی‌اپ.
setHeaderColor(color)	1.1	با این متد می‌توانید رنگ Header مینی‌اپ را با استفاده از کلیدهای رنگی پیشفرض (bg_color یا secondary_bg_color) یا رنگ دلخواه hex (در فرمت RRGGBB#) تنظیم کنید.
showScanQrPopup(data)	1.2	اسکنر QR را باز می‌کند.
هنگامی که اسکنر QR را می‌خواند، ایونت qrTextReceived را ارسال می‌کند.
هنگامی که اسکنر بسته می‌شود، ایونتscanQrPopupClosed را ارسال می‌کند.
sendData(data)	1.2	با فراخوانی این متد data در قالب آپدیت یک پیام با فیلد web_app_data به بازو ارسال می‌شود. دیتای ارسال شده حداکثر می‌تواند ۴۰۹۶ بایت باشد.
⚠️ توجه: بعد از فراخوانی این متد مینی‌اپ بسته می‌شود.
openInvoice(invoiceParams, callback)	1.3	با فراخوانی این متد، صفحه پرداخت در مینی‌اپ باز می‌شود.

پارامترها:

- پارامتر اول: invoiceParams - دقیقاً همان مقداری که از پاسخ createInvoiceLink دریافت می‌کنید را بدون تغییر پاس دهید
- پارامتر دوم (اختیاری): callback function - تابعی که پس از تکمیل فرآیند پرداخت اجرا می‌شود و یک آبجکت با فیلد status که وضعیت نهایی پرداخت را نشان می‌دهد به آن ارسال می‌گردد

مقادیر ممکن برای وضعیت پرداخت (status):

- paid: پرداخت با موفقیت انجام شده است
- cancelled: کاربر صفحه پرداخت را بسته است
- failed: کاربر تلاش کرده است که پرداخت را انجام دهد ولی موفق نشده است
- pending: پرداخت در حال پردازش است

رفتار مینی‌اپ: هنگام بسته شدن صفحه پرداخت، مینی‌اپ ایونت invoiceClosed را دریافت می‌کند.

نکته مهم: قبل از استفاده از این متد، ابتدا باید متد createInvoiceLink را فراخوانی کرده و مقدار invoiceParams را از پاسخ آن دریافت نمایید.

توجه - نسخه‌های قدیمی اندروید: در برخی نسخه‌های قدیمی‌تر اندروید، کاربران ممکن است با مشکلات UX در انجام فرآیند پرداخت مواجه شوند. برای حل این مشکل، می‌توانید از Memory Router استفاده کنید
Header
header

WebAppInitData
این شیء حاوی داده‌ای است که هنگام باز شدن مینی‌اپ به آن ارسال می‌شود.

فیلد	نوع	توضیحات
query_id	String	شناسه‌‌ای یکتا برای نشست مینی اپ.
user	WebAppUser	شی‌ای شامل اطلاعات مربوط به کاربر فعلی.
auth_date	Integer	زمان باز شدن مینی‌اپ در قالب Unix
hash	String	مقدار hash شده کل داده ارسالی. می‌توانید از آن برای اعتبارسنجی داده در سرور بازو استفاده کنید.
WebAppUser
این شیء حاوی داده کاربری است که از مینی‌اپ استفاده می‌کند.

فیلد	نوع	توضیحات
id	Integer	شناسه‌ی یکتای کاربر.
first_name	String	نام کاربر در بله.
username	String	اختیاری. نام کاربری کاربر در بله.
allows_write_to_pm	Boolean	اختیاری. مقدار true اگر این کاربر اجازه‌ی ارسال پیام توسط بازو به خود را داده باشد.
photo_url	String	اختیاری. آدرس عکس پروفایل کاربر. این عکس می‌تواند در قالب jpeg یا svg باشد.
ThemeParams
مینی‌اپ‌ها می‌توانند ظاهر رابط کاربری خود را مطابق تنظیمات کاربر در اپلیکیشن بله قرار دهند. این شیء حاوی داده تم فعلی کاربر در بله است.

فیلد	نوع	توضیحات
bg_color	String	اختیاری. رنگ پس‌زمینه در قالب #RRGGBB.
text_color	String	اختیاری. رنگ متن اصلی در قالب #RRGGBB.
برای استفاده در متن‌های بدنه (تیترها، پاراگراف‌ها، فهرست‌ها)
hint_color	String	اختیاری. رنگ متن راهنما در قالب #RRGGBB.
برای استفاده در متن‌های Placeholder (مثلاً در ورودی‌ها)، توضیحات فرعی و زیرنویس‌های کمرنگ.
link_color	String	اختیاری. رنگ پیوند در قالب #RRGGBB.‌
برای استفاده در پیوندها و متن‌های قابل کلیک
button_color	String	اختیاری. رنگ دکمه در قالب #RRGGBB.
برای استفاده در پس زمینه دکمه‌های اصلی مثل دکمه‌های تأیید
button_text_color	String	اختیاری. رنگ متن دکمه در قالب #RRGGBB.
برای استفاده در متن روی دکمه‌های رنگی.
secondary_bg_color	String	اختیاری. رنگ پس‌زمینه‌ی ثانویه در قالب #RRGGBB.
برای استفاده در پس‌زمینه کارت‌ها و بخش‌های جدا شده از پس‌زمینه اصلی.
header_bg_color	String	اختیاری. رنگ پس‌زمینه‌ی header در قالب #RRGGBB.
برای استفاده در نوار بالایی صفحات.
bottom_bar_bg_color	String	اختیاری. رنگ پس‌زمینه‌ی نوار پایینی در قالب #RRGGBB.
برای استفاده در بخش‌های ثابت پایین صفحه.
accent_text_color	String	اختیاری. رنگ متن تأکیدی در قالب #RRGGBB.
برای استفاده در متن‌های هایلایت شده و عناصر متنی با اهمیت بالا.
section_bg_color	String	اختیاری. رنگ پس‌زمینه‌ی بخش در قالب #RRGGBB.
برای استفاده همراه با secondary_bg_color.
section_header_text_color	String	اختیاری. رنگ متن header بخش در قالب #RRGGBB.
برای استفاده در تیتر بخش‌ها (مثلاً تنظیمات حساب، اطلاعات پرداخت)
section_separator_color	String	اختیاری. رنگ جداکننده‌ی بخش در قالب #RRGGBB.
subtitle_text_color	String	اختیاری. رنگ متن زیرعنوان در قالب #RRGGBB.
destructive_text_color	String	اختیاری. رنگ متن برای اقدامات غیرقابل بازگشت (مثلاً حذف حساب) در قالب #RRGGBB.
theme_params.png

BackButton
این شیء، کنترل دکمه بازگشت در header رابط کاربری بله را بر عهده دارد و با استفاده از آن می‌توانید دکمه بستن را با دکمه بازگشت جایگزین کنید.

فیلد	نوع	توضیحات
isVisible	Boolean	نشان می‌دهد که آیا دکمه قابل مشاهده است یا نه. به‌طور پیش‌فرض برابر با false است.
onClick(callback)	Function	این متد یک eventHandler برای کلیک روی دکمه ثبت می‌کند. معادل Bale.WebApp.onEvent('backButtonPressed', callback)
offClick(callback)	Function	این متد eventHandler کلیک روی دکمه را غیر فعال می‌کند. معادل Bale.WebApp.offEvent('backButtonPressed', callback)
show()	Function	متدی برای فعال و قابل مشاهده‌کردن دکمه.
hide()	Function	متدی برای پنهان‌کردن دکمه.
⚠️ هشدار مهم
برای اطمینان از کارکرد صحیح این دکمه در کلاینت وب بله، از روتینگ درون‌برنامه‌ای (In-Memory Routing) استفاده کنید که تاریخچه مرورگر را تغییر نمی‌دهند.

React Example:

import { MemoryRouter } from "react-router-dom";
 
<MemoryRouter>{/* Routes */}</MemoryRouter>;
Vue Example:

import { createMemoryHistory, createRouter } from 'vue-router';
 
const router = createRouter({
  history: createMemoryHistory(),
  routes: [...]
});
SettingsButton
این شیء وظیفه افزودن و کنترل گزینه تنظیمات را در منوی زمینه header در رابط کاربری بله را بر عهده دارد.

فیلد	نوع	توضیحات
isVisible	Boolean	نشان می‌دهد که آیا گزینه در منو قابل مشاهده است یا نه. به‌طور پیش‌فرض برابر با false است.
onClick(callback)	Function	این متد یک eventHandler برای کلیک روی گزینه ثبت می‌کند. معادل Bale.WebApp.onEvent('settingsButtonClicked', callback)
offClick(callback)	Function	این متد eventHandler کلیک روی گزینه را غیر فعال می‌کند. معادل Bale.WebApp.offEvent('settingsButtonClicked', callback)
show()	Function	متدی برای فعال و قابل مشاهده‌کردن گزینه تنظیمات در منوی زمینه.
hide()	Function	متدی برای پنهان‌کردن گزینه تنظیمات در منوی زمینه.
اعتبارسنجی داده‌های دریافت‌شده از طریق مینی‌اپ
برای اعتبارسنجی داده‌های دریافت‌شده از طریق مینی‌اپ، باید داده موجود در فیلد Bale.WebApp.initData را به سرور بازو ارسال کنید. این داده‌ها به‌صورت یک رشته url encoded و شامل مجموعه‌ای از key-value ها هستند. انواع داده‌های پیچیده (مانند WebAppUser) به‌صورت JSON-serialized در این رشته قرار می‌گیرند.

برای اطمینان از صحت داده‌های دریافت‌شده، می‌توانید مقدار hash دریافت‌شده را با نمایش hexadecimal امضای HMAC-SHA-256 از data-check-string مقایسه کنید. کلید مورد استفاده در این امضا، امضای HMAC-SHA-256 از توکن بازو با رشته ثابت "WebAppData" است.

data-check-string شامل تمامی فیلدهای دریافت‌شده است که به ترتیب حروف الفبا مرتب شده‌اند و مانند مثال زیر در کنار یکدیگر قرار گرفته اند. از کاراکتر خط جدید ('\n', 0x0A) به‌عنوان جداکننده استفاده می‌شود.

auth_date=<auth_date>\nquery_id=<query_id>\nuser=<user>
شبه‌کد بررسی صحت داده‌ها:

data_check_string = ...
secret_key = HMAC_SHA256(<bot_token>, "WebAppData")
if (hex(HMAC_SHA256(data_check_string, secret_key)) == hash) {
  // data is sent from Bale
}
برای جلوگیری از استفاده از داده‌های قدیمی، می‌توانید مقدار auth_date را بررسی کنید. این مقدار زمان باز شدن مینی‌اپ را در قالب Unix نشان می‌دهد.

Events
مینی‌اپ می‌تواند رویدادهایی را از کلاینت بله دریافت کند و با استفاده از متد Bale.WebApp.onEvent(eventType, eventHandler)، یک یا چند تابع را برای دریافت آن‌ها ثبت کند. داخل eventHandler، کلمه کلیدی this به Bale.WebApp اشاره می‌کند و مجموعه پارامترهای ارسال‌شده به آن بستگی به نوع رویداد دارد. در ادامه فهرستی از رویدادهای ممکن آورده شده است:

اسم	نسخه	توضیح
backButtonPressed	1	زمانی رخ می‌دهد که دکمه بازگشت فشرده شود. eventHandler هیچ پارامتری دریافت نمی‌کند.
settingsButtonPressed	1	زمانی رخ می‌دهد که دکمه تنظیمات در منو فشرده شود. eventHandler هیچ پارامتری دریافت نمی‌کند.
contactRequested	1	زمانی رخ می‌دهد که شماره تلفن کاربر درخواست شود. eventHandler یک آبجکت دریافت می‌کند که شامل فیلد status با یکی از مقادیر زیر است:
- sent – کاربر شماره تلفن خود را با بات به اشتراک گذاشت.
- cancelled – کاربر این درخواست را رد کرد.
homeScreenChecked	1.1	بعد از بررسی وضعیت بودن یا نبودن در home screen رخ می دهد.
تابعی که به عنوان event handler پاس داده می‌شود، یک آبجکت با فیلد status دریافت می‌کند که مقادیر زیر را می‌تواند داشته باشد:
- unsupported: این ویژگی پشتیبانی نمی شود، و امکان اضافه کردن مینی‌اپ به home screen وجود ندارد.
- unknown: این ویژگی پشتیبانی می شود، و مینی‌اپ را می توان اضافه کرد، اما تعیین اینکه آیا مینی‌اپ قبلاً اضافه شده است، امکان پذیر نیست.
- added: مینی‌اپ قبلاً به صفحه اصلی اضافه شده است.
- missed: - مینی‌اپ به صفحه اصلی اضافه نشده است.
homeScreenAdded	1.2	زمانی رخ می دهد که مینی‌اپ با موفقیت به home screen اضافه شود. تابع eventHandler ای که پاس داده می‌شود، هیچی پارامتری دریافت نمی‌کند.
homeScreenFailed	1.2	زمانی رخ می دهد که مینی‌اپ به home screen نتوانست اضافه شود. تابع eventHandler ای که پاس داده می‌شود، هیچی پارامتری دریافت نمی‌کند
qrTextReceived	1.2	زمان رخ می‌دهد که ‌اسکنر ‌‌QR را می‌خواند.
تابعeventHandler یک آبجکت با فیلد text دریافت می‌کند. متن اسکن شده درون این فیلد قرار دارد.
scanQrPopupClosed	1.2	زمان رخ می‌دهد که ‌اسکنر ‌‌QR بدون اسکن کردن بسته شود.
eventHandler هیچ پارامتری دریافت نمی‌کند.
invoiceClosed	1.3	زمانی رخ می‌دهد که صفحه پرداخت بسته شود.

تابع eventHandler به عنوان ورودی یک آبجکت دریافت می‌کند که ۲ فیلد دارد:
- invoiceId
- status
مقادیری که status می‌تواند داشته باشد:
- paid: پرداخت با موفقیت انجام شده است
- cancelled – کاربر صفحه پرداخت را بسته است
- failed – کاربر تلاش کرده است که پرداخت را انجام دهد ولی موفق نشده است
- pending – پرداخت در حال پردازش است
رفع اشکال مینی‌اپ در اپلیکیشن اندروید
برای تسهیل فرآیند توسعه و شناسایی سریع‌تر اشکالات در مینی اپ می‌توانید با فعال کردن قابلیت رفع اشکال (Debugging) به لاگ‌ها و خطاهای اپلیکیشن دسترسی پیدا کرده و مشکلات را به سرعت شناسایی کنید.

مراحل فعال‌سازی به شرح زیر است:

در تنظیمات اپلیکیشن بله، گزینه نسخه را نگه دارید و حالت ارسال لاگ را فعال کنید.

از بین گزینه‌ها، گزینه "فعال‌سازی رفع اشکال وب ویو" را انتخاب کنید.

در ادامه برای استفاده از این قابلیت این توضیحات را مطالعه کنید.

رفع اشکال باز نشدن مینی‌اپ در نسخه‌ وب
مینی‌اپ‌ها در نسخه‌ وب بله از طریق iframe باز می‌شوند و ممکن است که وجود هدرهای مشخصی، مانع باز شدن مینی‌اپ شما در نسخه‌ وب شود. برای اطمینان از درست باز شدن مینی‌اپ در نسخه‌ وب، از برقرار بودن موارد زیر مطمئن شوید:

هدر Content Security Policy (CSP) با directiveای به اسم frame-src و مقدار https://*.bale.ai موجود باشد. برای مثال:
Content-Security-Policy: frame-src 'https://*.bale.ai';
هدر X-Frame-Options وجود نداشته باشد.
نمایش هشدار آپدیت به کاربران با کلاینت قدیمی
ممکن است که ورژن اپلیکیشن بله‌ بعضی از کاربران شما قدیمی باشد و از مینی‌اپ پشتیبانی نکند. با این حال اگر آن دسته از کاربران با کلاینت قدیمی، قصد باز کردن مینی‌اپ از طریق Inline Button یا Reply Keyboard Markup را داشته باشند، متوجه قدیمی بودن کلاینت خود نمی‌شوند و احتمالا فکر می‌کنند که مشکل از بازوی شماست. برای حل این مشکل می‌توانید از فیلد isMiniAppSupported در WebApp استفاده کنید تا بتوانید به آن‌ها هشدار دهید که اپلیکیشن خود را به‌روزرسانی کنند.

مشکل پرداخت در نسخه‌های قدیمی اندروید
در برخی نسخه‌های قدیمی‌تر اندروید، کاربران ممکن است با مشکلاتی در انجام فرآیند پرداخت درون مینی‌اپ مواجه شوند. برای حل این مشکل می‌توانید از Memory Router استفاده کنید

React Example:

import { MemoryRouter } from "react-router-dom";
 
<MemoryRouter>{/* Routes */}</MemoryRouter>;
Vue Example:

import { createMemoryHistory, createRouter } from 'vue-router';
 
const router = createRouter({
  history: createMemoryHistory(),
  routes: [...]
});


بازوها در بله
API بازوی بله بر پایهٔ API بات تلگرام و با اعمال تغییراتی جزئی طراحی شده است؛ بنابراین می‌توانید از کتابخانه‌های متعددی که برای توسعهٔ بات تلگرام در زبان‌های مختلف ارائه شده‌اند، برای ساخت بازو در بله نیز استفاده کنید.

این API از ساختاری ساده و رایج مبتنی بر HTTP بهره می‌برد و به‌راحتی قابل استفاده است.

ساخت بازو
در اولین مرحله ساخت بازو باید با بازوی پدر به نشانی @botfather در بله گفتگو کنید و بازوی خودتان را بسازید. هنگام ساخت بازو، توکن احراز هویت منحصر به فردی به آن تعلق می‌گیرد. توکن‌ها با فرمتی مشابه 123456789:abcdIuZmK5qNEm2A1BhUaAg7MPJv1O9KCcBQB2ro هستند.

ایجاد درخواست
تمامی درخواست‌های مربوط به API بازوی بله باید در بستر HTTPS و به این شکل https://tapi.bale.ai/bot<token>/METHOD_NAME فراخوانی شوند. برای مثال به درخواست زیر توجه کنید:

درخواست

متد‌های GET و POST را پشتیبانی می‌شوند. همچنین از چهار روش زیر برای ارسال پارامتر در ریکوئست‌های بازوی بله پشتیبانی می‌شود:

URL query string

application/x-www-form-urlencoded

application/json (به جز برای آپلود فایل)

multipart/form-data (برای آپلود فایل استفاده کنید)

پاسخ حاوی یک شیء JSON است، که همیشه یک فیلد 'ok' از جنس boolean دارد و ممکن است فیلد توضیحات (description) که برای توضیح نتیجه‌ی درخواست است، داشته باشد. اگر فیلد ‘ok’ معادل true باشد، به این معنی هست که درخواست موفق بوده و نتیجه درخواست را می‌توان در فیلد ‘result’ یافت. در زمان ناموفق بودن درخواست، مقدار فیلد ‘ok’ برابر false بوده و خطا در ‘description’ توضیح داده می‌شود. یک فیلد ‘error_code’ از جنس integer نیز در پاسخ درخواست وجود دارد، که ممکن است مقدار آن در آینده تغییر کند. برخی از خطاها ممکن است یک فیلد اختیاری ‘parameters’ از نوع ResponseParameters داشته ‌باشند، که می‌تواند به مدیریت خودکار خطا کمک کند.

هیچ حساسیتی نسبت به بزرگ یا کوچک بودن حروف در API بازوی بله وجود ندارد. همه درخواست‌ها باید با فرمت UTF-8 ایجاد شوند.
ایجاد درخواست پس از دریافت آپدیت‌ها

از یکی از Content-Typeهای application/json یا application/x-www-form-urlencoded یا multipart/form-data برای ارسال پارامترها استفاده کنید. متد درخواست خود را از طریق پارامتر method مشخص کنید. اطلاع از آن‌که آیا چنین درخواستی موفق بوده و یا دستیابی به نتیجه‌ی آن امکان‌پذیر نیست.

دریافت آپدیت‌ها
دو روش مجزا برای دریافت آپدیت‌ها در بازو وجود دارد:
۱- getUpdates
۲- وب‌هوک

آپدیت‌های دریافتی تا زمانی که بازو از طریق یکی از روش‌های بالا آن‌ها را دریافت کند در سرور ذخیره می‌شوند. در حال حاضر 2000 پیام آخر به مدت ۲۴ ساعت نگهداری می‌شود.

در هر دو روش، آپدیت‌ها در قالب یک شیء JSON یکسان دریافت می‌شوند.

Update
این شیء بیانگر یک آپدیت دریافتی است. به ازای هر اتفاق در گفتگوها و هر تعامل کاربر با بازو یک آپدیت ایجاد می‌شود که نوع داده مشخصی دارد. حداکثر یکی از پارامترهای اختیاری می‌تواند در هر آپدیت داده شده وجود داشته باشد. به طور مثال یک آپدیت نمی تواند همزمان message و callback_query را داشته باشد.

فیلد	نوع	شرح
update_id	Integer	شناسه منحصربه‌فرد آپدیت. شناسه‌های آپدیت از صفر آغاز شده و به ترتیب افزایش می‌یابند. این ID مخصوصا زمانی به کار می‌آید که از وب‌هوک استفاده کنید، زیرا به شما اجازه می‌دهد که آپدیت‌های تکراری را نادیده گرفته و یا اگر از ترتیب خارج شده ‌باشند، دنباله آپدیت درست را بازیابی کنید.
message	Message	اختیاری. پیام‌ دریافتی جدید از هر نوعی – متن، تصویر، استیکر و غیره
edited_message	Message	اختیاری. نسخه ویرایش شده پیامی که در گذشته برای بازو ارسال شده است.
callback_query	CallbackQuery	اختیاری. callback query دریافتی جدید. هنگامی که بر روی دکمه های inline پیام ها کلیک می شود، یک آپدیت دارای این فیلد ارسال می شود. فیلد data در شئ CallbackQuery برابر با مقداری است که هنگام تعریف دکمه مشخص می شود.
pre_checkout_query	PreCheckoutQuery	اختیاری. زمانی که کاربر پرداخت را از طریق پیام درخواست پول کیف‌پولی انجام بدهد، قبل از نهایی شدن پرداخت، یک آپدیت با این فیلد برای بررسی تراکنش به بازو ارسال می‌شود. این شی شامل تمام اطلاعات مربوط به پرداخت است.
getUpdates
از این متد برای دریافت آپدیت‌ها با استفاده از long polling استفاده کنید. این متد آرایه‌ای از Update را باز می‌گرداند.

پارامتر	نوع	الزام	توضیحات
offset	Integer	اختیاری	شناسه اولین آپدیتی که باید برگردانده شود. باید یک واحد بیشتر از بیشترین مقدار شناسه‌های مربوط به Update های دریافتی قبلی باشد. به طور پیش‌فرض، ابتدا Update هایی بازگشت داده می شوند که اولین Update تایید نشده را دارند . به محض اینکه getUpdates با یک offset بیشتر از update_id خود فراخوانی شود، Update به صورت تایید شده در نظر گرفته خواهد شد. از مقدار offset منفی هم می‌توان استفاده کرد. از مقدار منفی offset میتوان برای دریافت Update ها از انتهای صف Update ها استفاده کرد. تمام Update های قبلی فراموش خواهند شد.
limit	Integer	اختیاری	حداکثر تعداد آپدیت‌هایی که باید بازگردانده شوند. مقادیر بین ۱ تا ۱۰۰ پذیرفته می‌شوند. پیش‌فرض ۱۰۰ است.
timeout	Integer	اختیاری	مدت زمان (بر حسب ثانیه) برای انتظار در حالت Long Polling. اگر آپدیتی در این مدت دریافت نشود، پاسخ خالی بازگردانده می‌شود. استفاده از این پارامتر باعث کاهش تعداد درخواست‌ها و بهبود کارایی می‌شود.
نکته: به منظور جلوگیری از Update های تکراری، مقدار offset را بعد از هر پاسخ سرور، مجدد حساب کنید.

setWebhook
از این متد برای تعیین یک URL وب‌هوک خروجی استفاده می شود که از طریق آن Update ها دریافت می‌شود. زمانی که یک Update برای بازو وجود دارد، یک درخواست HTTPS POST به URL مشخص‌شده ارسال خواهد شد که حاوی آپدیت JSON-serialized است. خروجی این متد در صورت اجرای موفقیت‌آمیز True است.

پارامتر	نوع	الزام	توضیحات
url	String	الزامی	آدرس HTTPS URL ای که Update ها باید به آن ارسال شوند. برای حذف یکپارچه‌سازی (غیرفعال کردن) وب‌هوک, یک رشته خالی را ارسال کنید.
نکته: درگاه‌هایی(ports) که در حال حاضر برای وب‌هوک پشتیبانی می‌شوند، عبارتند از: 443, 88.

deleteWebhook
در صورتی که تصمیم دارید مجدداً از متد getUpdates استفاده کنید، از این متد برای غیرفعال‌سازی اتصال وبهوک استفاده کنید. در صورت موفقیت، مقدار True بازگردانده می‌شود.

getWebhookInfo
از این متد برای دریافت وضعیت فعلی وب‌هوک استفاده کنید. این متد به هیچ پارامتری نیاز ندارد. در صورت اجرای موفقیت آمیز، یک شی WebhookInfo برگردانده می‌شود. اگر بازو در حال استفاده از متد getUpdates است، خروجی یک شی خواهد بود که فیلد url آن خالی است.

WebhookInfo
وضعیت فعلی یک وب‌هوک را نمایش می‌دهد.

فیلد	نوع	توضیحات
url	String	URL مربوط به وب‌هوک، در صورتی که وب‌هوک تنظیم نشده باشد، خالی خواهد بود.
انواع موجود
تمام انواع داده استفاده‌شده در پاسخ‌های API بازو به شکل اشیای JSON در جداول زیر توصیف شده‌اند.

برای ذخیره‌سازی تمام اعداد صحیح، استفاده از اعداد صحیح علامت‌دار ۳۲ بیتی کافی است، مگر اینکه به مورد دیگری برای این منظور اشاره شده باشد.

اختیاری: فیلدهای اختیاری بسته به شرایط، ممکن است در خروجی برگردانده نشوند. به طور مثال در صورتی که اطلاعات مربوط به گفتگو شخصی باشد، مقدار first_name وجود دارد ولی در اطلاعات گفتگوهای دیگر این مقدار خالی است.

User
این شی نشان‌دهنده یک کاربر بله یا یک بازو است.

فیلد	نوع	توضیحات
id	Integer	اختیاری. می‌تواند بیشتر از ۲۳۱ باشد و برخی زبان‌های برنامه‌نویسی ممکن است در تفسیر آن با مشکل روبه‌رو شوند. اما این فیلد حداکثر ۵۲ بیت با ارزش اهمیت دارد و فرمت ۶۴ بیتی علامت‌دار عدد صحیح یا عدد اعشاری ۶۴ بیتی برای ذخیره‌سازی آن مناسب است.
is_bot	Boolean	اگر کاربر، یک بازو باشد، مقدار آن True است.
first_name	String	نام کوچک کاربر یا بازو
last_name	String	اختیاری. نام خانوادگی کاربر یا بازو
username	String	اختیاری. نام کاربری کاربر یا بازو
language_code	String	اختیاری. برچسب زبانی IETF برای زبان کاربر
Chat
این شی نشان‌دهنده یک گفتگو است.

فیلد	نوع	توضیحات
id	Integer	شناسه یکتای گفتگو. می‌تواند بیشتر از ۲۳۱ باشد و برخی زبان‌های برنامه‌نویسی ممکن است در تفسیر آن با مشکل روبه‌رو شوند. اما این فیلد حداکثر ۵۲ بیت با ارزش اهمیت دارد و فرمت ۶۴ بیتی علامت‌دار عدد صحیح یا عدد اعشاری ۶۴ بیتی برای ذخیره‌سازی آن مناسب است.
type	String	نوع گفتگو که می‌تواند یکی از موارد private، group یا channel باشد.
title	String	اختیاری. عنوان گفتگو‌های داخل گروه‌ها یا کانال‌ها
username	String	اختیاری. نام کاربری برای گفتگو‌های خصوصی یا کانال‌ها در صورت وجود
first_name	String	اختیاری. نام کوچک طرف دیگر در یک گفتگوی خصوصی
last_name	String	اختیاری. نام خانوادگی طرف دیگر در یک گفتگوی خصوصی
ChatFullInfo
این شی حاوی اطلاعات کامل یک گفتگو است.

فیلد	نوع	توضیحات
id	Integer	شناسه یکتای گفتگو. می‌تواند بیشتر از ۲۳۱ باشد و برخی زبان‌های برنامه‌نویسی ممکن است در تفسیر آن با مشکل روبه‌رو شوند. اما این فیلد حداکثر ۵۲ بیت با ارزش اهمیت دارد و فرمت ۶۴ بیتی علامت‌دار عدد صحیح یا عدد اعشاری ۶۴ بیتی برای ذخیره‌سازی آن مناسب است.
type	String	نوع گفتگو که می‌تواند یکی از موارد private، group یا channel باشد.
title	String	اختیاری. عنوان گفتگو‌های داخل گروه‌ها یا کانال‌ها
username	String	اختیاری. نام کاربری برای گفتگو‌های خصوصی یا کانال‌ها در صورت وجود
first_name	String	اختیاری. نام کوچک طرف دیگر در یک گفتگوی خصوصی
last_name	String	اختیاری. نام خانوادگی طرف دیگر در یک گفتگوی خصوصی
photo	ChatPhoto	اختیاری. تصویر گفتگو.
bio	String	اختیاری. متن بخش "دربارهٔ من" کاربر در یک گفتگوی خصوصی.
description	String	اختیاری. متن بخش "توضیحات" گروه‌ها و کانال‌ها.
invite_link	String	اختیاری. پیوند دعوت گروه‌ها و کانال‌ها در صورتی که بازو دسترسی دریافت آن را داشته باشد.
linked_chat_id	String	اختیاری. شناسه یکتای گروه دیدگاه‌های کانال، در صورت وجود.
Message
این شی نشان‌دهنده یک پیام است.

فیلد	نوع	توضیحات
message_id	Integer	شناسه منحصربه‌فرد پیام در داخل این گفتگو
from	User	اختیاری. کاربر ارسال‌کننده‌ی پیام. برای پیام‌هایی که در کانال ارسال می‌شوند، مقدار آن خالی است.
date	Integer	تاریخی که پیام ارسال شده است (در قالب زمان یونیکس)
chat	Chat	اطلاعات گفتگویی که پیام به آن تعلق دارد.
sender_chat	Chat	اختیاری. زمانی مقداردهی می‌شود که پیام از طرف یک گفتگو ارسال شده و فرستندهٔ واقعی برای کاربران پنهان باشد (مانند پیام‌های کانال)؛ در این حالت برای حفظ سازگاری، فیلد from دارای یک مقدار ساختگی است.
forward_from	User	اختیاری. برای پیام‌های باز ارسال شده که ارسال‌کننده‌ی پیام اصلی را نشان می‌دهد
forward_from_chat	Chat	اختیاری. برای پیام های باز ارسال شده که اطلاعات مربوط به گفتگوی اصلی پیام را نشان می‌دهد و در کانال‌ها, از طرف مدیران ناشناس است
forward_from_message_id	Integer	اختیاری. شناسه پیام اصلی در کانال، برای پیام‌های باز ارسال شده از کانال‌ها
forward_date	Integer	اختیاری. برای پیام های باز ارسال شده , تاریخی که پیام اصلی در آن زمان ارسال شده است (در قالب زمان یونیکس)
reply_to_message	Message	اختیاری. پیامی که این پیام در پاسخ به آن ارسال شده است. توجه داشته باشید که در شیء Message قرارگرفته در این فیلد، مقدار reply_to_message دوباره مقدار‌دهی نخواهد شد.
edit_date	Integer	اختیاری. تاریخ آخرین باری که پیام ویرایش شده است (در قالب زمان یونیکس)
text	String	اختیاری. متن واقعی پیام با فرمت UTF-8 برای پیام‌های متنی
entities	آرایه‌ای از MessageEntity	اختیاری. برای پیام‌های متنی، بخش‌های خاصی از متن پیام مانند نام کاربری یا دستور بازو.
animation	Animation	اختیاری برای پیام‌های که تصویر متحرک دارند این فیلد پر می شود و اطلاعاتی در مورد انیمیشن می‌دهد. برای سازگاری عقب‌رو، زمانی که این فیلد تنظیم شود، فیلد document نیز تنظیم خواهد شد.
audio	Audio	اختیاریبرای پیام‌هایی که به صورت فایل صوتی هستند این فیلد با اطلاعات فایل مقدار دهی می شود.
document	Document	اختیاری. برای پیام‌هایی که به صورت فایل عمومی هستند، اطلاعاتی در مورد فایل می‌دهد.
photo	آرایه‌ای از PhotoSize	اختیاری. برای پیام‌هایی که به صورت تصویر هستند، اندازه‌های موجود برای تصویر را می‌دهد.
sticker	Sticker	اختیاری. برای پیام‌هایی که به صورت استیکر هستند، اطلاعاتی در مورد استیکر می‌دهد.
video	Video	اختیاری. برای پیام‌هایی که به صورت ویدیو هستند، اطلاعاتی در مورد ویدیو می‌دهد.
voice	Voice	اختیاری. برای پیام‌های صوتی، اطلاعاتی در مورد فایل می‌دهد.
caption	String	اختیاری. توضیحات مربوط به انیمیشن، فایل صوتی، سند، تصویر، ویدیو یا پیام صوتی
caption_entities	آرایه‌ای از MessageEntity	اختیاری. برای پیام‌های دارای زیرنویس، بخش‌های خاصی از متن آن مانند نام کاربری یا دستور بازو.
contact	Contact	اختیاری. در صورتی که پیام یک مخاطب به اشتراک‌گذاشته‌شده باشد، اطلاعاتی در مورد مخاطب می‌دهد.
location	Location	اختیاری. اگر پیام یک موقعیت به اشتراک‌گذاشته‌شده باشد، اطلاعاتی در مورد این موقعیت می‌دهد.
new_chat_members	آرایه‌ای از User	اختیاری.اطلاعاتی در مورد اعضای جدیدی که به گروه اضافه شده‌اند می دهد (خود بازو می‌تواند یکی از این اعضا باشد)
left_chat_member	User	اختیاری. عضوی که از گروه حذف یا خارج شده است و اطلاعاتی در مورد آن (این عضو می‌تواند خود بازو باشد)
invoice	Invoice	اختیاری. در صورتی که پیام از نوع درخواست پول یا جمع‌سپاری باشد، اطلاعاتی در مورد آن می‌دهد.
successful_payment	SuccessfulPayment	اختیاری. رسید یک پرداخت موفق که اطلاعاتی در مورد پرداخت می‌دهد.
web_app_data	WebAppData	اختیاری. یک پیام سرویس حاوی داده ارسالی از مینی‌اپ است.
reply_markup	InlineKeyboardButton	اختیاری. صفحه‌کلید inline که به یک پیام پیوست شده است.
MessageId
این شی نشان‌دهنده یک شناسه پیام منحصر‌به‌فرد است.

فیلد	نوع	توضیحات
message_id	Integer	شناسه پیام منحصر‌به‌فرد
MessageEntity
این شیء نمایانگر یک بخش خاص از متن پیام است؛ مانند نام کاربری (@username) و دستور بازو (/command).

فیلد	نوع	توضیح
type	String	نوع بخش از پیام. در حال حاضر یکی از mention یا bot_command
offset	Integer	موقعیت شروع بخش مورد نظر در متن پیام (بر حسب واحدهای UTF‑16)
length	Integer	طول بخش مورد نظر در متن پیام (بر حسب واحدهای UTF‑16)
PhotoSize
این شی یک اندازه از تصویر یا یک thumbnail از استیکر/فایل را نشان می‌دهد.

فیلد	نوع	توضیحات
file_id	String	شناسه این فایل که می‌توان آن‌ را جهت دانلود یا استفاده مجدد از فایل به کار برد.
file_unique_id	String	شناسه منحصربه‌فرد این فایل است که در طول زمان و برای بازوهای مختلف یکسان است. نمی‌توان این شناسه را برای دانلود یا استفاده مجدد از فایل به کار برد.
width	Integer	پهنای تصویر
height	Integer	ارتفاع تصویر
file_size	Integer	اختیاری. حجم فایل با واحد بایت
Animation
این شی نشان‌دهنده یک فایل انیمیشن است (GIF یا ویدیو H.264/MPEG-4 AVC بدون صدا).

فیلد	نوع	توضیحات
file_id	String	شناسه این فایل که می‌توان آن‌ را جهت دانلود یا استفاده مجدد از فایل به کار برد.
file_unique_id	String	شناسه منحصربه‌فرد این فایل که فرض می‌شود، در طول زمان و برای بازوهای مختلف یکسان است. نمی‌توان این شناسه را برای دانلود یا استفاده مجدد از فایل به کار برد.
width	Integer	پهنای تصویر ویدیو
height	Integer	ارتفاع تصویر ویدیو
duration	Integer	مدت زمان ویدیو به ثانیه
thumbnail	PhotoSize	اختیاری. thumbnail انیمیشن
file_name	String	اختیاری. نام اصلی انیمیشن
mime_type	String	اختیاری. نوع MIME فایل
file_size	Integer	اختیاری. حجم فایل با واحد بایت. می‌تواند بیشتر از ۲۳۱ باشد و برخی زبان‌های برنامه‌نویسی ممکن است در تفسیر آن با مشکل روبه‌رو شوند. اما این فیلد حداکثر ۵۲ بیت با ارزش اهمیت دارد و فرمت ۶۴ بیتی علامت‌دار عدد صحیح یا عدد اعشاری ۶۴ بیتی برای ذخیره‌سازی آن مناسب است.
Audio
این شی نشان‌دهنده یک فایل صوتی است.

فیلد	نوع	توضیحات
file_id	string	شناسه این فایل که می‌توان آن‌ را جهت دانلود یا استفاده مجدد از فایل به کار برد.
file_unique_id	string	شناسه منحصربه‌فرد این فایل که فرض می‌شود، در طول زمان و برای بازوهای مختلف یکسان است. نمی‌توان این شناسه را برای دانلود یا استفاده مجدد از فایل به کار برد.
duration	Integer	مدت زمان فایل صوتی به ثانیه.
title	string	اختیاری. عنوان فایل صوتی
file_name	string	اختیاری. نام اصلی فایل
mime_type	string	اختیاری. نوع MIME فایل
file_size	Integer	اختیاری. حجم فایل با واحد بایت. می‌تواند بیشتر از ۲۳۱ باشد و برخی زبان‌های برنامه‌نویسی ممکن است در تفسیر آن با مشکل روبه‌رو شوند. اما این فیلد حداکثر ۵۲ بیت با ارزش اهمیت دارد و فرمت ۶۴ بیتی علامت‌دار عدد صحیح یا عدد اعشاری ۶۴ بیتی برای ذخیره‌سازی آن مناسب است.
Document
این شی به طور کلی نشان‌دهنده یک فایل است (بر خلاف تصاویر، پیام‌های صوتی و فایل‌های صوتی).

فیلد	نوع	توضیحات
file_id	String	شناسه این فایل که می‌توان آن‌ را جهت دانلود یا استفاده مجدد از فایل به کار برد.
file_unique_id	String	شناسه منحصربه‌فرد این فایل که فرض می‌شود، در طول زمان و برای بازوهای مختلف یکسان است. نمی‌توان این شناسه را برای دانلود یا استفاده مجدد از فایل به کار برد.
thumbnail	PhotoSize	اختیاری. thumbnail سند که توسط ارسال‌کننده تعریف شده است.
file_name	String	اختیاری. نام اصلی فایل
mime_type	String	اختیاری. نوع MIME فایل
file_size	Integer	اختیاری. حجم فایل با واحد بایت. می‌تواند بیشتر از ۲۳۱ باشد و برخی زبان‌های برنامه‌نویسی ممکن است در تفسیر آن با مشکل روبه‌رو شوند. اما این فیلد حداکثر ۵۲ بیت با ارزش اهمیت دارد و فرمت ۶۴ بیتی علامت‌دار عدد صحیح یا عدد اعشاری ۶۴ بیتی برای ذخیره‌سازی آن مناسب است.
Video
این شی نشان‌دهنده یک فایل ویدیویی است.

فیلد	نوع	توضیحات
file_id	String	شناسه این فایل که می‌توان آن‌ را جهت دانلود یا استفاده مجدد از فایل به کار برد.
file_unique_id	String	شناسه منحصربه‌فرد این فایل که فرض می‌شود، در طول زمان و برای بازوهای مختلف یکسان است. نمی‌توان این شناسه را برای دانلود یا استفاده مجدد از فایل به کار برد.
width	Integer	پهنای ویدیو
height	Integer	ارتفاع ویدیو
duration	Integer	مدت زمان ویدیو به ثانیه
file_name	String	اختیاری. نام اصلی فایل است.
mime_type	String	اختیاری. نوع MIME فایل
file_size	Integer	اختیاری. حجم فایل با واحد بایت. می‌تواند بیشتر از ۲۳۱ باشد و برخی زبان‌های برنامه‌نویسی ممکن است در تفسیر آن با مشکل روبه‌رو شوند. اما این فیلد حداکثر ۵۲ بیت با ارزش اهمیت دارد و فرمت ۶۴ بیتی علامت‌دار عدد صحیح یا عدد اعشاری ۶۴ بیتی برای ذخیره‌سازی آن مناسب است.
Voice
این شی نشان‌دهنده یک پیام صوتی است.

فیلد	نوع	توضیحات
file_id	string	شناسه این فایل که می‌توان در جهت دانلود یا استفاده مجدد از فایل به کار برد.
file_unique_id	string	شناسه منحصربه‌فرد این فایل که فرض می‌شود، در طول زمان و برای بازوهای مختلف یکسان است. نمی‌توان این شناسه را برای دانلود یا استفاده مجدد از فایل به کار برد.
Contact
این شی نشان‌دهنده یک مخاطب ذخیره شده توسط است.

فیلد	نوع	توضیحات
phone_number	string	شماره تماس مخاطب
first_name	string	نام کوچک مخاطب
last_name	string	اختیاری. نام خانوادگی مخاطب
user_id	Integer	اختیاری. شناسه کاربری مخاطب در بله. این شناسه دقیقا ۳۲بیت با ارزش دارد
Location
این شی نشان‌دهنده یک نقطه روی نقشه است.

فیلد	نوع	توضیحات
longitude	Float	طول جغرافیایی
latitude	Float	عرض جغرافیایی
Invoice
این شیء بیانگر یک پیام درخواست پول یا یک پیام جمع‌سپاری است.

پارامتر	نوع	توضیحات
title	String	عنوان پیام.
description	String	توضیحات پیام.
total_amount	Integer	مبلغ کل درخواست پول یا جمع‌سپاری.
File
این شی نشان‌دهنده یک فایل آماده دانلود است. این فایل را می‌توان از طریق لینک https://tapi.bale.ai/file/bot<token>/<file_path دانلود کرد.

فیلد	نوع	توضیحات
file_id	string	شناسه این فایل که می‌توان برای دانلود یا استفاده مجدد از فایل به کار برد
file_unique_id	string	شناسه منحصربه‌فرد این فایل که فرض می‌شود در طول زمان و برای بازوهای مختلف یکسان است. نمی‌توان آن را برای دانلود یا استفاده مجدد از فایل به کار برد.
file_size	Integer	اختیاری. حجم فایل با واحد بایت. می‌تواند بیشتر از ۲۳۱ باشد و برخی زبان‌های برنامه‌نویسی ممکن است در تفسیر آن با مشکل روبه‌رو شوند. اما این فیلد حداکثر ۵۲ بیت با ارزش اهمیت دارد و فرمت ۶۴ بیتی علامت‌دار عدد صحیح یا عدد اعشاری ۶۴ بیتی برای ذخیره‌سازی آن مناسب است.
file_path	string	اختیاری. مسیر فایل. از آدرس [https://tapi.bale.ai/file/bot<token>/<file_path] برای دریافت فایل استفاده کنید.
ReplyKeyboardMarkup
این شی نشان‌دهنده یک صفحه‌کلید سفارشی با دکمه‌هایی برای ارسال پاسخ است.

فیلد	نوع	توضیحات
keyboard	آرایه‌ای از آرایه KeyboardButton	آرایه‌ای از ردیفی از دکمه‌ها که هر ردیف با یک آرایه از اشیای KeyboardButton نمایش داده می‌شود.
KeyboardButton
این شی نشان‌دهنده یک دکمه از صفحه‌کلید پاسخ است. برای دکمه‌های متنی ساده، می‌توان از Stringبه جای این شی به منظور مشخص‌کردن متن دکمه استفاده کرد.

فیلد	نوع	توضیحات
text	string	متن دکمه. اگر هیچ یک از فیلدهای اختیاری استفاده نشوند، در صورت فشردن دکمه، این فیلد به صورت یک پیام ارسال خواهد شد.
request_contact	Boolean	اختیاری. اگر مقدار آن True باشد، در صورت فشردن دکمه، شماره تماس کاربر به صورت یک مخاطب ارسال خواهد شد.
request_location	Boolean	اختیاری. اگر مقدار آن True باشد، در صورت فشردن دکمه، کاربر وارد نقشه شده و می‌تواند موقعیت فعلی یا انتخابی خود را ارسال کند.
web_app	WebAppInfo	اختیاری. حاوی اطلاعات لازم در مورد مینی‌اپی است که با فشردن دکمه توسط کاربر باز می‌شود.
InlineKeyboardMarkup
این شی نشان‌دهنده یک صفحه کلید inline است که درست زیر پیام متعلق به آن نمایش داده می‌شود.

فیلد	نوع	توضیحات
inline_keyboard	آرایه‌ای از آرایه InlineKeyboardButton	آرایه‌ای از ردیف‌های صفحه کلید که هر کدام در قالب آرایه‌ای از InlineKeyboardButton نشان داده می‌شوند.
InlineKeyboardButton
یک دکمه از صفحه‌کلید inline را نشان می‌دهد. تنها می توانید از یکی از فیلدهای اختیاری استفاده کنید.

فیلد	نوع	توضیحات
text	String	متن برچسب روی دکمه
url	String	اختیاری. آدرسی که با فشردن دکمه باید باز شود.
callback_data	String	اختیاری. داده‌هایی که باید در یک درخواست فراخوانی برای بازو پس از فشردن دکمه ارسال شوند، بین ۱ تا ۶۴ بایت
web_app	WebAppInfo	اختیاری. حاوی اطلاعات لازم در مورد مینی‌اپی است که با فشردن دکمه توسط کاربر باز می‌شود.
copy_text	CopyTextButton	اختیاری. حاوی اطلاعات دکمه‌ای است که متن مشخص شده را رونوشت می‌کند.
ReplyKeyboardRemove
با دریافت پیامی که شامل این شیء باشد، کلاینت‌های بله صفحه‌کلید سفارشی فعلی را حذف کرده و صفحه‌کلید عادی را نمایش می‌دهند. به‌صورت پیش‌فرض، صفحه‌کلیدهای سفارشی تا زمانی که صفحه‌کلید جدیدی از طرف بازو ارسال شود، نمایش داده می‌شوند.

فیلد	نوع	توضیحات
remove_keyboard	True	از کلاینت‌ها درخواست می‌کند تا صفحه‌کلید سفارشی را حذف کنند. کاربر دیگر نمی‌تواند این صفحه‌کلید را مشاهده کند.
CallbackQuery
این شی نشان‌دهنده‌ی یک فراخوان برگشتی ورودی از یک دکمه در یک صفحه‌کلید inline است. اگر دکمه‌ای که مبدا درخواست است به یک پیام ارسال‌شده توسط بازو پیوست شود، فیلد message وجود خواهد داشت.

فیلد	نوع	توضیحات
id	String	شناسه منحصربه‌فرد این درخواست
from	User	ارسال‌کننده
message	Message	اختیاری. پیامی که دکمه به آن پیوست شده است. توجه داشته باشید که برای پیام‌های خیلی قدیمی، محتوای پیام و تاریخ آن در دسترس نخواهد بود.
data	String	اختیاری. داده‌های مرتبط با دکمه. توجه داشته باشید که امکان دارد پیام، هیچ دکمه‌ای با این داده‌ها نداشته باشد.
نکته: پس از فشرده‌شدن یک دکمهٔ اینلاین توسط کاربر، دکمه وارد حالت انتظار و تا زمان فراخوانی متد answerCallbackQuery در این حالت باقی می‌ماند. بنابراین، لازم است این متد را حتی در صورتی که نیازی به نمایش پیامی به کاربر ندارید (بدون استفاده از پارامترهای اختیاری)، فراخوانی کنید.

WebAppData
این شیء بیانگر داده‌ای است که از طرف مینی‌اپ به بازو ارسال شده است.

فیلد	نوع	توضیحات
data	string	داده‌ای که از طرف مینی‌اپ به بازو ارسال شده است.
دقت کنید که این فیلد می‌تواند حاوی داده‌ای غیر واقعی باشد که توسط مینی‌اپ ارسال نشده است.
WebAppInfo
حاوی مشخصات یک مینی‌اپ است.

فیلد	نوع	توضیحات
url	String	آدرس مینی‌اپ در قالب یک URL با پروتکل HTTPS (اطلاعات بیشتر در مورد مینی‌اپ‌ها)
CopyTextButton
این شیء بیانگر یک دکمه inline است که متن مشخص شده را رونوشت می‌کند.

فیلد	نوع	توضیحات
text	String	متنی که با فشردن دکمه رونوشت می‌شود؛ بین ۱ تا ۲۵۶ کاراکتر.
ChatMember
این شیء حاوی اطلاعات مربوط به یکی از اعضای گفت‌وگو است. در حال حاضر چهار نوع مختلف از اعضا پشتیبانی می‌شود:

ChatMemberOwner
ChatMemberAdministrator
ChatMemberMember
ChatMemberRestricted
ChatMemberOwner
نمایانگر عضوی است که مالک گفت‌وگو بوده و تمام دسترسی‌های مدیریتی را دارد.

فیلد	نوع	توضیح
status	String	وضعیت عضو در گفت‌وگو، همیشه "creator"
user	User	اطلاعات کاربر
ChatMemberAdministrator
نمایانگر عضوی است که دارای دسترسی‌های مدیریتی است.

فیلد	نوع	توضیح
status	String	وضعیت عضو، همیشه "administrator"
user	User	اطلاعات کاربر
can_delete_messages	Boolean	اگر true باشد، مدیر می‌تواند پیام سایر کاربران را حذف کند
can_manage_video_chats	Boolean	اگر true باشد، مدیر می‌تواند تماس‌های ویدئویی گفتگو را مدیریت کند
can_restrict_members	Boolean	اگر true باشد، مدیر می‌تواند اعضا را از گفتگو اخراج کند
can_promote_members	Boolean	اگر true باشد، مدیر می‌تواند مدیران جدیدی با دسترسی محدود اضافه کند
can_change_info	Boolean	اگر true باشد، کاربر می‌تواند عنوان، عکس و سایر تنظیمات گفت‌وگو را تغییر دهد
can_invite_users	Boolean	اگر true باشد، کاربر می‌تواند اعضای جدید دعوت کند
can_post_stories	Boolean	اگر true باشد، مدیر می‌تواند برای کانال ماجرا قرار دهد.
can_post_messages	Boolean	در کانال‌ها: اگر true باشد، مدیر می‌تواند پیام ارسال کند. اختیاری
can_edit_messages	Boolean	در کانال‌ها: اگر true باشد، مدیر می‌تواند پیام‌های دیگران را ویرایش کند. اختیاری
can_pin_messages	Boolean	در گروه‌ها: اگر true باشد، کاربر می‌تواند پیام‌ها را سنجاق کند. اختیاری
ChatMemberMember
نمایانگر عضوی است که هیچ دسترسی یا محدودیت خاصی ندارد.

فیلد	نوع	توضیح
status	String	وضعیت عضو، همیشه "member"
user	User	اطلاعات کاربر
ChatMemberRestricted
نمایانگر عضوی است که در گروه دارای محدودیت‌هایی است (فقط در سوپرگروه‌ها).

فیلد	نوع	توضیح
status	String	وضعیت عضو، همیشه "restricted"
user	User	اطلاعات کاربر
is_member	Boolean	اگر true باشد، کاربر در حال حاضر عضو گروه است
can_send_messages	Boolean	اگر true باشد، کاربر می‌تواند پیام عادی ارسال کند
can_send_audios	Boolean	اگر true باشد، می‌تواند فایل صوتی ارسال کند
can_send_documents	Boolean	اگر true باشد، می‌تواند سند ارسال کند
can_send_photos	Boolean	اگر true باشد، می‌تواند تصویر ارسال کند
can_send_videos	Boolean	اگر true باشد، می‌تواند ویدئو ارسال کند
can_change_info	Boolean	اگر true باشد، می‌تواند عنوان یا تصویر گروه را تغییر دهد
can_invite_users	Boolean	اگر true باشد، می‌تواند کاربران جدید دعوت کند
can_pin_messages	Boolean	اگر true باشد، می‌تواند پیام‌ها را سنجاق کند
ChatPhoto
این شی نشان‌دهنده یک تصویر گفتگو است.

فیلد	نوع	توضیحات
small_file_id	String	شناسه فایل برای تصویر کوچک گفتگو (۱۶۰×۱۶۰). این شناسه را فقط برای دانلود تصویر و فقط تا زمانی می‌توان استفاده کرد که تصویر مورد نظر تغییر نکرده باشد.
small_file_unique_id	String	شناسه منحصربه‌فرد برای تصویر کوچک گفتگو (۱۶۰×۱۶۰)، که در طول زمان و برای بازوهای مختلف یکسان است. نمی‌توان آن را برای دانلود یا استفاده مجدد از فایل به کار برد.
big_file_id	String	شناسه فایل برای تصویر بزرگ گفتگو (۶۴۰×۶۴۰). این شناسه را می‌توان برای دانلود تصویر و فقط تا زمانی استفاده کرد که تصویر تغییر نکرده باشد.
big_file_unique_id	String	شناسه منحصربه‌فرد برای تصویر بزرگ گفتگو (۶۴۰×۶۴۰)، که در طول زمان و برای بازوهای مختلف یکسان است. نمی‌توان آن را برای دانلود یا استفاده مجدد از فایل به کار برد.
InputMedia
این شی محتوای پیام رسانه‌ای که باید ارسال گردد را مشخص می‌کند و باید یکی از موارد زیر باشد:

InputMediaAnimation

InputMediaDocument

InputMediaAudio

InputMediaPhoto

InputMediaVideo

InputMediaPhoto
نشان‌دهنده یک تصویر برای ارسال است.

فیلد	نوع	توضیحات
type	String	باید photo باشد.
media	String	فایلی که باید ارسال شود و ۳ حالت میتواند داشته باشد ۱) file_id را قرار دهید تا یک فایل که در سرورهای بله وجود دارد، ارسال شود (پیشنهادی) ۲) یک HTTP URL وارد کنید تا آن فایل از اینترنت دریافت شود ۳) عبارت “<attach://file_attach_name>” را وارد کنید تا یک فایل جدید با استفاده از multipart/form-data با نام <file_attach_name> آپلود شود.
caption	String	اختیاری. زیرنویس تصویری که باید ارسال شود، بین ۰ تا ۱۰۲۴ کاراکتر
InputMediaVideo
نشان‌دهنده یک ویدیو برای ارسال است.

فیلد	نوع	توضیحات
type	String	باید video باشد.
media	String	فایلی که باید ارسال شود و ۳ حالت میتواند داشته باشد۱) یک file_id را قرار دهید وارد کنید تا یک فایل که در سرورهای بله وجود دارد، ارسال شود (پیشنهادی) ۲) یک HTTP URL وارد کنید تا آن یک فایل را از اینترنت دریافت شود. ۳) عبارت “<attach://file_attach_name>” را وارد کنید تا یک فایل جدید با استفاده از multipart/form-data با نام <file_attach_name> آپلود شود.
thumbnail	InputFile یا String	اختیاری. thumbnail فایلی که ارسال می‌شود؛ اگر تولید thumbnail برای ویدیو در سمت سرور پشتیبانی شود، می‌توان آن را نادیده گرفت. thumbnail باید با فرمت JPEG و حجم آن کمتر از ۲۰۰ کیلوبایت باشد. پهنا و ارتفاع thumbnail نباید بیشتر از ۳۲۰ باشد. اگر ویدیو با استفاده از multipart/form-data آپلود نشده باشد، نادیده گرفته می‌شود. thumbnailها را نمی‌توان مجدداً استفاده کرد و آن‌ها را فقط می‌توان به صورت یک فایل جدید آپلود کرد، بنابراین اگر thumbnail با استفاده از multipart/form-data با نام <file_attach_name> آپلود شده باشد، می‌توانید عبارت “<attach://<file_attach_name>” را وارد کنید.
caption	String	اختیاری. زیرنویس ویدیویی که باید ارسال شود، بین ۰ تا ۱۰۲۴ کاراکتر
width	Integer	اختیاری. پهنای تصویر ویدیو
height	Integer	اختیاری. ارتفاع تصویر ویدیو
duration	Integer	اختیاری. مدت زمان ویدیو (در واحد ثانیه)
InputMediaAnimation
نشان‌دهنده یک فایل انیمیشن است (ویدیو GIF یا H.264/MPEG-4 AVC بدون صدا) برای ارسال است.

فیلد	نوع	توضیحات
type	String	باید animation باشد.
media	String	فایلی که باید ارسال شود و ۳ حالت میتواند داشته باشد. ۱)یک file_id را وارد کنید تا یک فایل که در سرورهای بله وجود دارد، ارسال شود (پیشنهادی)، ۲) یک HTTP URL وارد کنید تا آن یک فایل را از اینترنت دریافت شود ۳) یا عبارت “<attach://file_attach_name>” را وارد کنید تا یک فایل جدید را با استفاده از multipart/form-data با نام <file_attach_name> آپلود شود کنید.
thumbnail	InputFile یا String	اختیاری. thumbnail فایلی که ارسال شده است؛ اگر تولید تامبنیل برای فایل در سمت سرور پشتیبانی شود، می‌توان آن را نادیده گرفت. تامبنیل باید با فرمت JPEG و حجم آن کمتر از ۲۰۰ کیلوبایت باشد. پهنا و ارتفاع تامبنیل نباید بیشتر از ۳۲۰ باشد. اگر فایل با استفاده از multipart/form-data آپلود نشده باشد، نادیده گرفته می‌شود. thumbnail ها را نمی‌توان مجدداً استفاده کرد و آن‌ها را فقط می‌توان به صورت یک فایل جدید آپلود کرد، بنابراین اگر thumbnail با استفاده از multipart/form-data با نام <file_attach_name> آپلود شده باشد، می‌توانید عبارت “<attach://<file_attach_name>” را وارد کنید.
caption	String	اختیاری. زیرنویس انیمیشنی که باید ارسال شود، بین ۰ تا ۱۰۲۴ کاراکتر
width	Integer	اختیاری. پهنای تصویر انیمیشن
height	Integer	اختیاری. ارتفاع تصویر انیمیشن
duration	Integer	اختیاری. مدت زمان انیمیشن (با واحد ثانیه)
InputMediaAudio
نشان‌دهنده یک فایل صوتی برای ارسال است. این فایل به صورت یک موسیقی در نظر گرفته می‌شود.

فیلد	نوع	توضیحات
type	String	باید audio باشد.
media	String	فایلی که باید ارسال شود و ۳ حالت میتواند داشته باشد. ۱)یک file_id را وارد کنید تا یک فایل که در سرورهای بله وجود دارد، ارسال شود (پیشنهادی)، ۲) یک HTTP URL وارد کنید تا آن یک فایل را از اینترنت دریافت شود ۳) یا عبارت “<attach://file_attach_name>” را وارد کنید تا یک فایل جدید را با استفاده از multipart/form-data با نام <file_attach_name> آپلود شود کنید.
thumbnail	InputFile یا String	اختیاری. thumbnail فایلی که ارسال شده است؛ اگر تولید thumbnail برای فایل در سمت سرور پشتیبانی شود، می‌توان آن را نادیده گرفت. تامبنیل باید با فرمت JPEG و حجم آن کمتر از ۲۰۰ کیلوبایت باشد. پهنا و ارتفاع تامبنیل نباید بیشتر از ۳۲۰ باشد. اگر فایل با استفاده از multipart/form-data آپلود نشده باشد، نادیده گرفته می‌شود. تامبنیل‌ها را نمی‌توان مجدداً استفاده کرد و آن‌ها را فقط می‌توان به صورت یک فایل جدید آپلود کرد، بنابراین اگر thumbnail با استفاده از multipart/form-data با نام <file_attach_name> آپلود شده باشد، می‌توانید عبارت “<attach://<file_attach_name>” را وارد کنید.
caption	String	اختیاری. زیرنویس فایل صوتی که باید ارسال شود، بین ۰ تا ۱۰۲۴ کاراکتر
duration	Integer	اختیاری. مدت زمان فایل صوتی (در واحد ثانیه)
title	String	اختیاری. عنوان فایل صوتی
InputMediaDocument
نشان‌دهنده یک فایل برای ارسال است.

فیلد	نوع	توضیحات
type	String	باید document باشد.
media	String	فایلی که باید ارسال شود و ۳ حالت میتواند داشته باشد. ۱)یک file_id را وارد کنید تا یک فایل که در سرورهای بله وجود دارد، ارسال شود (پیشنهادی)، ۲) یک HTTP URL وارد کنید تا آن یک فایل را از اینترنت دریافت شود ۳) یا عبارت “<attach://file_attach_name>” را وارد کنید تا یک فایل جدید را با استفاده از multipart/form-data با نام <file_attach_name> آپلود شود کنید.
thumbnail	InputFile یا String	اختیاری. thumbnail فایلی که ارسال شده است؛ اگر تولید thumbnail برای فایل در سمت سرور پشتیبانی شود، می‌توان آن را نادیده گرفت. تامبنیل باید با فرمت JPEG و حجم آن کمتر از ۲۰۰ کیلوبایت باشد. پهنا و ارتفاع تامبنیل نباید بیشتر از ۳۲۰ باشد. اگر فایل با استفاده از multipart/form-data آپلود نشده باشد، نادیده گرفته می‌شود. تامبنیل‌ها را نمی‌توان مجدداً استفاده کرد و آن‌ها را فقط می‌توان به صورت یک فایل جدید آپلود کرد، بنابراین اگر thumbnail با استفاده از multipart/form-data با نام <file_attach_name> آپلود شده باشد، می‌توانید عبارت “<attach://<file_attach_name>” را وارد کنید.
caption	String	اختیاری. زیرنویس سندی که باید ارسال شود، بین ۰ تا ۱۰۲۴ کاراکتر
InputFile
این شی نشان‌دهنده محتوای یک فایل است که آپلود می‌شود. باید با استفاده از multipart/form-data به روش معمول و مشابه با آپلود فایل‌ها از طریق مرورگر ارسال شود.

ارسال فایل ها
سه روش برای ارسال فایل‌ها وجود دارد (تصاویر، استیکرها، فایل صوتی، رسانه‌ها و غیره):

۱- اگر فایل در حال حاضر در سرورهای بله ذخیره شده باشد، نیازی به آپلود مجدد آن نخواهد بود. هر شی فایل یک فیلد file_id دارد، این file_id را به عنوان یک پارامتر به جای بارگذاری کردن، وارد کنید. برای ارسال فایل‌ها از این طریق هیچ محدودیتی وجود ندارد.

۲- HTTP URL فایلی که باید ارسال شود ارسال کنید. بله فایل را دانلود و ارسال خواهد کرد. حداکثر اندازه ممکن برای تصاویر ۵ مگابایت است و ۲۰ مگابایت برای دیگر انواع محتوا.

۳- فایل را با استفاده از multipart/form-data به روش معمول و مشابه با آپلود از طریق مرورگر، با متد POST ارسال کنید. حداکثر اندازه‌ ممکن برای تصاویر ۱۰ مگابایت است و برای فایل‌های دیگر ۵۰ مگابایت.

ارسال با استفاده از file_id
تغییر نوع فایل در زمان ارسال مجدد آن از طریق file_id وجود ندارد. یعنی یک ویدیو را نمی‌توان به صورت یک تصویر و یک تصویر را نمی‌توان به صورت یک سند ارسال کرد.

امکان ارسال مجدد thumbnail ها وجود ندارد.

ارسال مجدد یک تصویر با استفاده از file_id تمام اندازه‌های آن تصویر را ارسال خواهد کرد.

file_id برای هر بازوی مجزا منحصربه‌فرد است و نمی‌توان آن را از یک بازو به بازوی دیگر انتقال داد.

file_id به صورت یکتا برای شناسایی یک فایل به کار می‌رود، اما یک فایل می‌تواند چندین file_id صحیح حتی برای همان بازو داشته باشد.

Sending by URL
در زمان ارسال از طریق URL، فایل باید دارای MIME صحیح باشد (برای مثال audio/mpeg برای sendAudio).

در sendDocument، ارسال با استفاده از URL فقط برای فایل‌های GIF، PDF و ZIP کار خواهد کرد.

برای استفاده از sendVoice، فایل باید از نوع audio/ogg باشد و حجم آن بیشتر از ۱ مگابایت نباشد. پیام‌های صوتی با حجم ۱ تا ۲۰ مگابایت به صورت فایل ارسال خواهند شد.

تنظیمات دیگر باید کار کند ولی هیچ تضمینی برای آن وجود ندارد.

متدهای موجود
نام متدهای موجود در API بازو، هیچ حساسیتی نسبت به حروف بزرگ و کوچک ندارند و متدهای GET و POST پشتیبانی می‌شوند. برای ارسال پارامترها در درخواست‌های API بازو، چهار روش وجود دارد:

ارسال در URL درخواست (query string)

application/x-www-form-urlencoded

application/json

multipart/form-data

در فراخوان‌های موفق، نتیجه در قالب یک شی JSON برگردانده می‌شود.

getMe
یک متد ساده برای تست توکن احراز هویت بازو است. این متد به هیچ پارامتری نیاز ندارد و اطلاعات پایه بازو را به شکل یک شی User بر می‌گرداند.

sendMessage
از این متد برای ارسال پیام‌های متنی استفاده کنید. در صورت اجرای موفق، پیام ارسال‌شده برگردانده می‌شود.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگو هدف یا نام‌ کاربری کانال (با فرمت @channelusername)
text	string	الزامی	متن پیامی که باید ارسال شود، بین ۱ تا ۴۰۹۶ کاراکتر بعد از
reply_to_message_id	Integer		شناسه‌ی پیام اصلی اگر که پیام یک پاسخ باشد.
reply_markup	InlineKeyboardButton یا ReplyKeyboardMarkup یا ReplyKeyboardRemove		امکانات اضافه رابط کاربری بازو. یک شی JSON-serialized است که میتواند برای یک صفحه‌کلید inline یا ReplyMarkup و یا دستورالعمل‌هایی برای حذف صفحه‌کلید پاسخ باشد.
Formatting options
برای برجسته نوشتن کافی است متن را بین دو ستاره قرار دهید. توجه کنید که باید قبل از ستارۀ اول و بعد از ستارۀ دوم یک فاصله (اسپیس) بگذارید.

برای کج یا ایتالیک نوشتن کافی است عبارت را بین دو زیرخط (آندرلاین_) قرار بدهید. از این ویژگی می‌توان برای تأکید بر بخشی از متن یا جلب کردن توجه مخاطب به عبارتی خاص استفاده کرد. توجه کنید که باید قبل از زیرخط اول و بعد از زیرخط دوم یک فاصله (اسپیس) بگذارید.

برای ساخت لینک باید متن را بین دو کروشه بنویسید و آدرس لینک را بلافاصله (بدون اِسپِیس) داخل دو پرانتز بگذارید. از این ویژگی می‌توان برای ارجاع مخاطب به مطلبی دیگر در بله یا هر سایت دیگری استفاده کرد.

به این شکل: [متن](آدرس‌لینک)

نمایش آنی از دیگر امکانات پیام‌رسان بله است که می‌توان به کمک آن، توضیحاتی به متن اصلی اضافه کرد. برای این کار کافی است متن را بین دو کروشه بگذارید و سه ``` قبل و بعد از توضیح تکمیل‌کننده قرار بدهید.

به این شکل: ```‌[متن]‌توضیحات‌```

forwardMessage
از این متد برای باز ارسال هر نوع پیامی استفاده کنید.در صورت اجرای موفقیت‌آمیز، پیام ارسال‌شده در خروجی برگردانده می‌شود.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگوی هدف یا شناسه کانال هدف (با فرمت @channelusername)
from_chat_id	Integer یا String	الزامی	شناسه منحصربه‌فرد گفتگویی که پیام اصلی در آن‌جا ارسال شده است (یا نام کاربری کانال با فرمت @channelusername)
message_id	Integer	الزامی	شناسه پیام در گفتگوی مشخص‌شده در from_chat_id
copyMessage
از این متد برای کپی کردن انواع پیام‌ها استفاده کنید. پیام‌های سرویس بله و پیام‌های رسید پرداخت قابل کپی شدن نیستند. این روش مشابه روش forwardMessage است، اما پیام کپی شده لینکی به پیام اصلی ندارد. در صورت موفقیت، MessageId پیام ارسال شده را برمی گرداند.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگوی هدف یا شناسه کانال هدف (با فرمت @channelusername)
from_chat_id	Integer یا String	الزامی	شناسه منحصربه‌فرد گفتگویی که پیام اصلی در آن‌جا ارسال شده است (یا نام کاربری کانال با فرمت @channelusername)
message_id	Integer	الزامی	شناسه پیام در گفتگوی مشخص‌شده در from_chat_id
sendPhoto
از این متد جهت ارسال تصاویر استفاده کنید. در صورت اجرای موفقیت‌آمیز، پیام ارسال‌شده برگردانده می‌شود.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
from_chat_id	Integer یا String	الزامی	شناسه منحصربه‌فرد گفتگوی که پیام اصلی در آن‌جا ارسال شده است (یا نام کاربری کانال با فرمت @channelusername)
photo	InputFile یا String	الزامی	تصویری که باید ارسال شود. یک file_id را به صورت رشته وارد کنید تا یک تصویر که در سرورهای بله وجود دارد، ارسال شود (پیشنهادی) یا یک HTTP URL به صورت رشته وارد کنید تا بله یک تصویر را از اینترنت دریافت و ارسال کند و یا یک تصویر جدید را با استفاده از multipart/form-data آپلود کنید.
caption	String	اختیاری	زیرنویس تصویر (در زمان ارسال مجدد تصاویر با استفاده از file_id نیز قابل استفاده است)، بین ۰ تا ۴۰۹۶ کاراکتر
reply_to_message_id	Integer	اختیاری	ID پیام اصلی، در صورتی که پیام یک پاسخ باشد.
reply_markup	InlineKeyboardButton یا ReplyKeyboardMarkup یا ReplyKeyboardRemove	اختیاری	امکانات اضافه رابط کاربری بازو. یک شی JSON-serialized است که میتواند برای یک صفحه‌کلید inline یا ReplyMarkup و یا دستورالعمل‌هایی برای حذف صفحه‌کلید پاسخ باشد.
sendAudio
اگر می‌خواهید کلاینت‌های بله این فایل‌ها را در پخش کننده موسیقی نمایش دهند، از این متد برای ارسال فایل‌های صوتی استفاده کنید. فایل صوتی باید با فرمت .MP3 یا .M4A باشد. در صورت اجرای موفق، پیام ارسال‌شده برگردانده می‌شود. بازوهای فعلی مي‌توانند فایل‌های صوتی با اندازه‌های تا ۵۰ مگابایت را ارسال کنند. این محدودیت احتمال‌ دارد در آینده عوض شود.

برای ارسال پیام‌های صوتی، از متد sendVoice استفاده کنید.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
audio	InputFile یا String	الزامی	فایل صوتی که باید ارسال شود. یک file_id را به صورت رشته وارد کنید تا یک فایل صوتی که در سرورهای بله وجود دارد، ارسال شود (پیشنهادی) یا یک HTTP URL به صورت رشته وارد کنید تا بله یک فایل صوتی را از اینترنت دریافت و ارسال کند و یا یک فایل صوتی جدید را با استفاده از multipart/form-data آپلود کنید.
caption	String	اختیاری	زیرنویس فایل صوتی، بین ۰ تا ۴۰۹۶ کاراکتر
reply_to_message_id	Integer	اختیاری	ID پیام اصلی، در صورتی که پیام یک پاسخ باشد.
reply_markup	InlineKeyboardButton یا ReplyKeyboardMarkup یا ReplyKeyboardRemove	اختیاری	امکانات اضافه رابط کاربری بازو. یک شی JSON-serialized است که میتواند برای یک صفحه‌کلید inline یا ReplyMarkup و یا دستورالعمل‌هایی برای حذف صفحه‌کلید پاسخ باشد.
sendDocument
این متد به منظور ارسال فایل‌های عمومی استفاده می‌شود. در صورت اجرای موفق، پیام ارسال‌شده برگردانده می‌شود. در حال حاضر، بازوها می‌توانند هر نوع فایلی را با حداکثر اندازه ۵۰ مگابایت ارسال کنند. این محدودیت ممکن است در آینده تغییر کند.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
document	InputFile یا String	الزامی	فایلی که باید ارسال شود. یک file_id را به صورت رشته وارد کنید تا فایلی که در سرورهای بله وجود دارد، ارسال شود (پیشنهادی) یا یک HTTP URL به صورت رشته وارد کنید تا بله فایل را از اینترنت دریافت و ارسال کند و یا فایل جدیدی را با استفاده از multipart/form-data آپلود کنید.
caption	String	اختیاری	زیرنویس سند (در زمان ارسال مجدد اسناد از طریق file_id نیز قابل استفاده است)، بین ۰ تا ۴۰۹۶ کاراکتر
reply_to_message_id	Integer	اختیاری	ID پیام اصلی، در صورتی که پیام یک پاسخ باشد.
reply_markup	InlineKeyboardButton یا ReplyKeyboardMarkup یا ReplyKeyboardRemove	اختیاری	امکانات اضافه رابط کاربری بازو. یک شی JSON-serialized است که میتواند برای یک صفحه‌کلید inline یا ReplyMarkup و یا دستورالعمل‌هایی برای حذف صفحه‌کلید پاسخ باشد.
sendVideo
این متد جهت ارسال فایل‌های ویدیویی استفاده می‌شوند، کلاینت‌های بله از ویدیوهای MPEG4 پشتیبانی می‌کنند (فرمت‌های دیگر نیز به صورت Document قابل ارسال هستند). در صورت اجرای موفق، خروجی پیام ارسال‌شده خواهد بود. بازوها در حال حاضر می‌توانند فایل‌های ویدیویی با حداکثر اندازه ۵۰ مگابایت را ارسال کنند. این محدودیت ممکن است در آینده دستخوش تغییر شود.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
video	InputFile یا String	الزامی	ویدیویی که باید ارسال شود. یک file_id را به صورت رشته وارد کنید تا ویدیویی که در سرورهای بله وجود دارد، ارسال شود (پیشنهادی) یا یک HTTP URL به صورت رشته وارد کنید تا ویدیویی را از اینترنت دریافت کنید و یا ویدیویی جدید را با استفاده از multipart/form-data آپلود کنید.
caption	String	اختیاری	زیرنویس ویدیو (می‌توان در زمان ارسال مجدد ویدیوها از طریق file_id استفاده کرد)، بین ۰ تا ۴۰۹۶ کاراکتر بعد از تجزیه موجودیت‌ها
reply_to_message_id	Integer	اختیاری	ID پیام اصلی، در صورتی که پیام یک پاسخ باشد.
reply_markup	InlineKeyboardButton یا ReplyKeyboardMarkup یا ReplyKeyboardRemove	اختیاری	امکانات اضافه رابط کاربری بازو. یک شی JSON-serialized است که میتواند برای یک صفحه‌کلید inline یا ReplyMarkup و یا دستورالعمل‌هایی برای حذف صفحه‌کلید پاسخ باشد.
sendAnimation
این متد به منظور ارسال فایل‌های انیمیشن (ویدیو GIF یا H.264/MPEG-4 AVC بدون صدا) استفاده می‌شود. در صورت موفقیت، خروجی آن پیام ارسال‌شده است. بازوها در حال حاضر می‌توانند فایل‌های انیمیشنی با حداکثر حجم ۵۰ مگابایت را ارسال کنند. این محدودیت می‌تواند در آینده تغییر پیدا کند.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
animation	InputFile یا String	الزامی	انیمیشنی که باید ارسال شود. یک file_id را به صورت رشته وارد کنید تا انیمیشنی که در سرورهای بله وجود دارد، ارسال شود (پیشنهادی) یا یک HTTP URL به صورت رشته وارد کنید تا بله آن انیمیشن را از اینترنت دریافت و ارسال کند و یا انیمیشن جدیدی را با استفاده از multipart/form-data آپلود کنید.
reply_to_message_id	Integer	اختیاری	ID پیام اصلی، در صورتی که پیام یک پاسخ باشد.
reply_markup	InlineKeyboardButton یا ReplyKeyboardMarkup یا ReplyKeyboardRemove	اختیاری	امکانات اضافه رابط کاربری بازو. یک شی JSON-serialized است که میتواند برای یک صفحه‌کلید inline یا ReplyMarkup و یا دستورالعمل‌هایی برای حذف صفحه‌کلید پاسخ باشد.
sendVoice
اگر می‌خواهید کلاینت‌های بله فایل را به صورت یک پیام صوتی نمایش دهند، از این روش برای ارسال فایل‌های صوتی استفاده کنید. . در صورت اجرای موفق، خروجی پیام ارسال‌شده است. در حال حاضر، بازوها می‌توانند پیام‌های صوتی با حداکثر حجم ۵۰ مگابایت را ارسال کنند. این محدودیت می‌تواند در آینده دچار تغییر شود.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
voice	InputFile یا String	الزامی	فایل صوتی که باید ارسال شود. یک file_id را به صورت رشته وارد کنید تا یک فایل صوتی که در سرورهای بله وجود دارد، ارسال شود (پیشنهادی) یا یک HTTP URL به صورت رشته وارد کنید تا بله یک فایل صوتی را از اینترنت دریافت و ارسال کند و یا یک فایل صوتی جدید را با استفاده از multipart/form-data آپلود کنید.
caption	String	اختیاری	زیرنویس پیام صوتی، بین ۰ تا ۴۰۹۶ کاراکتر بعد از تجزیه موجودیت‌ها
reply_to_message_id	Integer	اختیاری	ID پیام اصلی، در صورتی که پیام یک پاسخ باشد.
reply_markup	InlineKeyboardButton یا ReplyKeyboardMarkup یا ReplyKeyboardRemove	اختیاری	امکانات اضافه رابط کاربری بازو. یک شی JSON-serialized است که میتواند برای یک صفحه‌کلید inline یا ReplyMarkup و یا دستورالعمل‌هایی برای حذف صفحه‌کلید پاسخ باشد.
sendMediaGroup
این متد جهت ارسال گروهی تصاویر، ویدیوها، اسناد یا فایل‌های صوتی در قالب یک آلبوم استفاده می‌شود. اسناد و فایل‌های صوتی فقط با پیام‌هایی از نوع خود می‌توانند در یک آلبوم ارسال شوند. در صورت اجرای موفق، آرایه‌ای از پیام‌های ارسال‌شده برگردانده می‌شوند.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
media	آرایه‌ای از InputMediaAudio، InputMediaDocument، InputMediaPhoto و InputMediaVideo	الزامی	یک آرایه JSON-serialized شامل پیام‌هایی که باید ارسال شوند،
reply_to_message_id	Integer	اختیاری	ID پیام اصلی، در صورتی که پیام یک پاسخ باشد.
sendLocation
این متد به منظور ارسال نقطه‌ای از نقشه استفاده می‌شود. در صورت اجرای موفق، پیام ارسال‌شده به عنوان خروجی برگردانده می‌شود.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
latitude	Float	الزامی	عرض جغرافیایی موقعیت مکانی
longitude	Float	الزام	طول جغرافیایی موقعیت مکانی
horizontal_accuracy	Float	اختیاری	شعاع عدم قطعیت برای یک نقطه مکانی، با واحد متر اندازه‌گیری می‌شود و عددی بین ۰ تا ۱۵۰۰ است.
reply_to_message_id	Integer	اختیاری	ID پیام اصلی، در صورتی که پیام یک پاسخ باشد.
reply_markup	InlineKeyboardButton یا ReplyKeyboardMarkup یا ReplyKeyboardRemove	اختیاری	امکانات اضافه رابط کاربری بازو. یک شی JSON-serialized است که میتواند برای یک صفحه‌کلید inline یا ReplyMarkup و یا دستورالعمل‌هایی برای حذف صفحه‌کلید پاسخ باشد.
sendContact
این متد به منظور ارسال یک مخاطب تلفن استفاده می‌شود. در صورت اجرای موفقیت‌آمیز، پیام ارسال‌شده به عنوان خروجی برگردانده می‌شود.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
phone_number	String یا Integer	الزامی	شماره تماس مخاطب
first_name	String	الزامی	نام کوچک مخاطب
last_name	String	اختیاری	اختیاری. نام خانوادگی مخاطب
reply_to_message_id	Integer	اختیاری	ID پیام اصلی، در صورتی که پیام یک پاسخ باشد.
reply_markup	InlineKeyboardButton یا ReplyKeyboardMarkup یا ReplyKeyboardRemove	اختیاری	امکانات اضافه رابط کاربری بازو. یک شی JSON-serialized است که میتواند برای یک صفحه‌کلید inline یا ReplyMarkup و یا دستورالعمل‌هایی برای حذف صفحه‌کلید پاسخ باشد.
sendChatAction
از این متد زمانی استفاده کنید که نیاز دارید به کاربر اطلاع دهید عملی در سمت بازو در حال انجام است. این وضعیت حداکثر تا ۶ ثانیه نمایش داده می‌شود. در صورت موفقیت، مقدار true برگردانده می‌شود.

مثال: فرض کنید یک بازو برای پردازش تصویر به چند ثانیه زمان نیاز دارد. به‌جای ارسال پیامی مانند «در حال دریافت تصویر، لطفاً منتظر بمانید…»، بازو می‌تواند از sendChatAction با مقدار upload_photo برای پارامتر action استفاده کند. در این صورت، کاربر وضعیت «درحال ارسال عکس» را در رابط کاربری مشاهده خواهد کرد.

استفاده از این متد زمانی توصیه می‌شود که بازو قرار است با تأخیری محسوس به کاربر پاسخ دهد.

پارامتر	نوع	الزام	توضیح
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
action	String	الزامی	نوع عملی که نمایش داده می‌شود. یکی از این موارد: typing, upload_photo, record_video, upload_video, record_voice, upload_voice, choose_sticker
getFile
این متد برای دریافت اطلاعات پایه‌ی یک فایل و آماده‌سازی آن برای دانلود استفاده می‌شود. در حال حاضر، بازوها می‌توانند فایل‌هایی با حداکثر حجم ۲۰ مگابایت را دانلود کنند. در صورت اجرای موفق، یک شی File بر می‌گرداند. سپس، فایل را می‌توان از طریق لینک <https://tapi.bale.ai/file/bot<token>/<file_path دانلود کرد، که در این لینک، <file_path> از پاسخ دریافت می‌شود. صحت لینک برای یک ساعت تضمین شده است. زمانی که لینک منقضی شود، یک لینک جدید را می‌توان با فراخوانی مجدد این متد دریافت کرد.

پارامتر	نوع	الزام	توضیحات
file_id	String	الزامی	شناسه فایلی که باید اطلاعات آن دریافت شود.
answerCallbackQuery
از این متد برای پاسخ دادن به یک Callback Query که از طریق دکمه‌های اینلاین ارسال شده، استفاده می‌شود. این متد به بازو امکان می‌دهد بازخوردی سریع (مانند پیام هشدار یا تایید) به کاربر نمایش دهد.

با توجه به اینکه این قابلیت از خرداد ۱۴۰۴ به کلاینت‌های بله افزوده شده و در نسخه‌های قدیمی در دسترس نیست، برای بررسی پشتیبانی این ویژگی در کلاینت کاربر، فیلد callback_query_id را بررسی کنید؛ اگر مقدار این فیلد با 1 آغاز شود، به‌معنای استفاده‌ی کاربر از نسخه‌ای قدیمی و عدم پشتیبانی از این قابلیت است. در چنین شرایطی می‌توانید اطلاعات موردنظر را از طریق روش‌های جایگزین، مانند ارسال پیام، به کاربر نمایش دهید.

در صورت اجرای موفق، مقدار True برگردانده می‌شود.

نکته: پس از فشرده‌شدن یک دکمهٔ اینلاین توسط کاربر، دکمه وارد حالت انتظار و تا زمان فراخوانی متد answerCallbackQuery در این حالت باقی می‌ماند. بنابراین، لازم است این متد را حتی در صورتی که نیازی به نمایش پیامی به کاربر ندارید (بدون استفاده از پارامترهای اختیاری)، فراخوانی کنید.

پارامتر	نوع	الزام	توضیحات
callback_query_id	String	الزامی	شناسهٔ یکتای callback query که باید به آن پاسخ داده شود.
text	String	اختیاری	متن اعلانی که به کاربر نمایش داده می‌شود. در صورت خالی بودن، چیزی به کاربر نمایش داده نمی‌شود و صرفاً دکمه اینلاین از حالت انتظار خارج می‌شود. بین ۰ تا ۲۰۰ کاراکتر
show_alert	Boolean	اختیاری	اگر True باشد، پیام به‌صورت هشدار (Alert) نمایش داده می‌شود. در غیر این صورت، به‌صورت یک اعلان در بالای صفحه نمایش داده می‌شود.
banChatMember
این متد برای مسدود کردن کاربر در یک گروه یا یک کانال استفاده می‌شود. در مورد گروه‌ها و کانال‌ها، کاربر نخواهد توانست از طریق لینک‌های دعوت به گفتگو برگردد، مگر اینکه در ابتدا از حالت مسدود خارج شود. برای اینکه این متد کار کند، بازو باید مدیر گفتگو باشد و حقوق و اختیارات مربوط به مدیران را داشته باشد. در صورت اجرای موفق، مقدار True را بر می‌گرداند.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گروه هدف یا نام کاربری کانال هدف (با فرمت @channelusername)
user_id	Integer	الزامی	شناسه منحصربه‌فرد کاربر هدف
unbanChatMember
این متد جهت خارج‌ کردن یک کاربر مسدودشده از حالت مسدود در یک گروه یا کانال استفاده می‌شوند. کاربر به صورت خودکار به گروه یا کانال بر نخواهد گشت، اما امکان پیوستن به گروه از طریق لینک دعوت را دارد. برای این منظور، بازو باید مدیر گفتگو باشد. به طور پیش‌فرض، این متد تضمین می‌کند که بعد از فراخوانی، کاربر عضوی از گفتگو نیست، اما می‌تواند به آن بپیوندد. بنابراین، اگر کاربر عضوی از گفتگو باشد، از محیط گفتگو نیز حذف خواهد شد. اگر نمی‌خواهید این اتفاق بیافتد، از پارامتر only_if_banned استفاده کنید. در صورت اجرای موفق، خروجی True است.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گروه هدف یا نام کاربری گروه یا کانال هدف (با فرمت @channelusername)
user_id	Integer	الزامی	شناسه منحصربه‌فرد کاربر هدف
only_if_banned	Boolean	اختیاری	اگر کاربر مسدود نشده است، کاری انجام دهد.
promoteChatMember
این متد به منظور ارتقا یا تنزل یک کاربر در یک گروه یا کانال استفاده می‌شود. برای این کار، بازو باید مدیر گفتگو باشد و حقوق و اختیارات مدیریتی متناسب داشته باشد. جهت تنزل یک کاربر، مقدار تمام پارامترهای Boolean را False قرار دهید. در صورت اجرای موفق، مقدار True را بر می‌گرداند.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگو هدف یا نام کاربری کانال هدف (با فرمت @channelusername)
user_id	Integer	الزامی	شناسه منحصربه‌فرد کاربر هدف
can_change_info	Boolean	اختیاری	اگر میخواهید ادمین توانایی تغییر اطلاعات چت را داشته باشد True را ارسال کنید
can_post_messages	Boolean	اختیاری	توانایی ارسال پست توسط کاربر
can_edit_messages	Boolean	اختیاری	توانایی ویرایش پیام های چت
can_delete_messages	Boolean	اختیاری	توانایی حذف پیام های چت
can_manage_video_chats	Boolean	اختیاری	توانایی مدیریت تماس تصویری
can_invite_users	Boolean	اختیاری	توانایی دعوت کاربر
can_restrict_members	Boolean	اختیاری	توانایی محدود کردن کاربران
setChatPhoto
این متد به منظور تنظیم یک تصویر پروفایل جدید برای گفتگو استفاده می‌شود. تصاویر برای گفتگو‌های خصوصی قابل تغییر نیستند. برای این منظور، بازو باید مدیر گفتگو باشد و باید حقوق و اختیارات مدیریتی متناسب داشته باشد. در صورت اجرای موفق، مقدار True را بر می‌گرداند.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
photo	InputFile	الزامی	تصویر گفتگو جدید که با استفاده از multipart/form-data آپلود شده است.
leaveChat
این متد برای بازو به منظور ترک یک گروه، گروه یا کانال استفاده می‌شود. در صورت اجرای موفق، خروجی آن مقدار True است.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
getChat
این متد به منظور دریافت اطلاعات به‌روز در مورد گفتگو (نام فعلی کاربر برای مکالمات یک به یک، نام کاربری فعلی یک کاربر، گروه یا کانال) استفاده می‌شود. در صورت اجرای موفق، یک شی ChatFullInfo بر می‌گرداند.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
getChatMembersCount
این متد به منظور دریافت تعداد اعضای گفتگو استفاده می‌شود. در صورت اجرای موفق، یک عدد صحیح بر می‌گرداند.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
getChatMember
این متد به منظور دریافت اطلاعات یکی از اعضای گفتگو (گروه یا کانال) استفاده می‌شود. برای استفاده از این متد، بازو باید مدیر گفتگو باشد. در صورت اجرای موفق، یک شی ChatMember بر گردانده می‌شود.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
user_id	Integer	الزامی	شناسه منحصربه‌فرد کاربر
pinChatMessage
با استفاده از این متد میتوانید یک پیام را به پیام های پین شده اضافه کنید. اگرچت خصوصی نباشد بازو باید ادمین باشد و دسترسی can_pin_messages را داشته باشد

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
message_id	Integer	الزامی	شناسه منحصر به فرد پیام
unPinChatMessage
با استفاده از این متد میتوانید یک پیام را از پیام های پین شده حذف کنید. اگرچت خصوصی نباشد بازو باید ادمین باشد و دسترسی can_pin_messages را داشته باشد

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
message_id	Integer	الزامی	شناسه منحصر به فرد پیام
unpinAllChatMessages
با استفاده از این متد میتوانید همه پیام ها را حذف کنید. اگرچت خصوصی نباشد بازو باید ادمین باشد و دسترسی can_pin_messages را داشته باشد

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
setChatTitle
با استفاده از این متد میتوان عنوان چت را تغییر داد. این متد در چت های خصوصی کاربردی ندارد.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
title	String	الزامی	عنوان جدید گروه
setChatDescription
با استفاده از این متد میتوان توضیحات یک گروه یا یک کانال را تغییر داد. بازو در این گفتگوها باید دسترسی مربوط را داشته باشد.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
description	String	الزامی	توضیحات جدید
deleteChatPhoto
با استفاده از این متد میتوان عکس چت را حذف کرد. این متد در چت های خصوصی کاربردی ندارد. بازو برای استفاده باید دسترسی مربوط را داشته باشد.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
createChatInviteLink
با استفاده از این متد می توان برای گروه لینک جدید ایجاد کرد.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
revokeChatInviteLink
با استفاده از این متد میتوان لینک عضویت گروه را ابطال کرد. پس از ابطال، لینک جدید ساخته میشود و برگردانده می شود.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
invite_link	String	الزامی	لینک عضویت
exportChatInviteLink
.با استفاده از این متد بازو می تواند برای یک چت لینک عضویت جدید ایجاد کند در صورتی که قبلا ایجاد شده باشد ابطال و جدید ساخته می شود

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
به روز رسانی پیام‌ها
متدهای زیر به شما اجازه می‌دهند که یک پیام موجود در تاریخچه پیام را به جای ارسال یک پیام جدید، به وسیله یک اقدام تغییر دهید. این متد برای پیام‌هایی با صفحه‌کلیدهای inline مفید است و از طرف دیگر، به کاهش درهم‌ریختگی در مکالمات با بازوهای گفتگو معمولی کمک می‌کند.

editMessageText
از این متد برای ویرایش پیام‌های متنی استفاده کنید.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام کاربری کانال هدف (با فرمت @channelusername)
message_id	Integer	الزامی	شناسه پیامی که باید ویرایش شود.
text	String	الزامی	متن جدید پیام، بین ۱ تا ۴۰۹۶ کاراکتر
reply_markup	InlineKeyboardButton	اختیاری	یک شی JSON-serialized برای یک صفحه‌کلید inline
editMessageCaption
از این متد برای ویرایش زیرنویس پیام‌هایی مانند عکس، ویدئو یا انیمیشن استفاده کنید.

پارامتر	نوع	الزام	توضیح
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام کاربری کانال هدف (با فرمت @channelusername)
message_id	Integer	الزامی	شناسه پیامی که باید ویرایش شود.
caption	String	اختیاری	زیرنویس جدید پیام؛ تا ۴۰۹۶ کاراکتر
reply_markup	InlineKeyboardButton	اختیاری	یک شی JSON-serialized برای یک صفحه‌کلید inline
editMessageReplyMarkup
این متد برای ویرایش صفحه‌کلید یک پیام بدون تغییر در محتوای آن استفاده کنید.

پارامتر	نوع	الزام	توضیح
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام کاربری کانال هدف (با فرمت @channelusername)
message_id	Integer	الزامی	شناسه پیامی که باید ویرایش شود.
reply_markup	InlineKeyboardButton	اختیاری	یک شی JSON-serialized برای یک صفحه‌کلید inline
deleteMessage
این متد به منظور حذف یک پیام، از جمله پیام‌های سرویس، با محدودیت‌های زیر استفاده می‌شود:

- یک پیام فقط در صورتی قابل حذف است که کمتر از ۴۸ ساعت قبل ارسال شده باشد.

- بازوها می‌توانند پیام‌های خروجی را در گفتگو‌های خصوصی و گروه‌ها حذف کنند.

- بازوها می‌توانند پیام‌های ورودی را در گفتگو‌های خصوصی حذف کنند.

- اگر بازو مدیر یک گروه باشد، می‌تواند هر پیامی در گروه را حذف کند.

- اگر بازو دارای مجوز can_delete_messages در کانال باشد، می‌تواند هر پیامی را در آنجا حذف کند.

در صورت اجرای موفق، مقدار True را بر می‌گرداند.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد برای گفتگو هدف یا نام کاربری کانال هدف (با فرمت @channelusername)
message_id	Integer	الزامی	شناسه پیامی که باید حذف شود.
استیکرها
متدها و اشیای زیر به بازوی شما اجازه می‌دهند که استیکرها و بسته‌های استیکر را مدیریت کنید.

Sticker
این شی نشان‌دهنده یک استیکر است.

فیلد	نوع	توضیحات
file_id	String	شناسه این فایل که می‌توان آن‌ را جهت دانلود یا استفاده مجدد از فایل به کار برد.
file_unique_id	String	شناسه منحصربه‌فرد این فایل که فرض می‌شود، در طول زمان و برای بازوهای مختلف یکسان است. نمی‌توان این شناسه را برای دانلود یا استفاده مجدد از فایل به کار برد.
type	String	نوع استیکر که در حال حاضر یکی از انواع “regular” یا “mask” می‌تواند باشد.
width	Integer	پهنای استیکر
height	Integer	ارتفاع استیکر
file_size	Integer	اختیاری. اندازه فایل با واحد بایت
StickerSet
این شی نشان‌دهنده یک بسته‌ی استیکر است.

فیلد	نوع	توضیحات
name	String	نام بسته‌ استیکر
title	String	عنوان بسته‌ استیکر
stickers	آرایه‌ای از Sticker	لیست تمام استیکرهای مجموعه
thumbnail	PhotoSize	اختیاری. thumbnail بسته‌ استیکر با فرمت .WEBP، .TGS یا .WEBM
uploadStickerFile
این متد به منظور آپلود یک فایل برای استفاده در متدهای createNewStickerSet و addStickerToSet در آینده استفاده می‌شود (چندین بار می‌توان فایل را استفاده کرد). در صورت اجرای موفق، فایل آپلودشده را بر می‌گرداند.

پارامتر	نوع	الزام	توضیحات
user_id	Integer	الزامی	شناسه کاربری مالک فایل استیکر
sticker	InputFile	الزامی	یک فایل به فرمت .WEBP، .PNG، .TGS یا .WEBM.
createNewStickerSet
این متد به منظور ایجاد یک بسته‌ی استیکر جدید با مالکیت کاربر ایجاد کننده استفاده می‌شود. بازو می‌تواند بسته‌ی استیکر ایجادشده را ویرایش کند. در صورت اجرای موفق، مقدار True را بر می‌گرداند.

پارامتر	نوع	الزام	توضیحات
user_id	Integer	الزامی	شناسه کاربری مالک مجموعه استیکر تولیدشده
name	String	الزامی	نام کوتاه مجموعه استیکر. این نام می‌تواند شامل حروف انگلیسی، اعداد یا "_" باشد. باید با یک حرف شروع شود و نمی‌تواند شامل چند خط underscore باشد و باید در پایان "by_bot_username_" قرار گیرد. bot_username نسبت به حروف بزرگ و کوچک حساس است. بین ۱ تا ۶۴ کاراکتر
title	String	الزامی	عنوان بسته‌ی استیکر، بین ۱ تا ۶۴ کاراکتر
sticker	آرایه‌ای از InputSticker	الزامی	یک لیست JSON-serialized شامل ۱ تا ۵۰ استیکر که باید به بسته‌ی استیکر اضافه شوند.
addStickerToSet
این متد به منظور اضافه‌کردن یک استیکر جدید به یک بسته‌ی ایجادشده توسط بازو استفاده می‌شود. فرمت استیکر اضافه‌شده باید با فرمت دیگر استیکرها در مجموعه مطابقت داشته باشد. مجموعه‌های استیکر ایموجی می‌توانند تا ۲۰۰ استیکر داشته باشند. مجموعه‌های استیکر ویدیویی می‌توانند تا ۵۰ استیکر داشته باشند. مجموعه‌های استیکر معمولی می‌توانند تا ۱۲۰ استیکر داشته باشند. در صورت اجرای موفق، مقدار True را بر می‌گرداند.

پارامتر	نوع	الزام	توضیحات
user_id	Integer	الزامی	شناسه کاربری مالک بسته‌ی استیکر
name	String	الزامی	نام بسته‌ی استیکر
sticker	InputSticker	الزامی	یک شی JSON-serialized با اطلاعاتی در مورد استیکر اضافه‌شده. اگر دقیقاً همان استیکر به بسته اضافه شده باشد، بسته‌ی استیکر تغییر نخواهد کرد.
پرداخت
بازوی شما می‌تواند به کاربران بله پیام «درخواست پول» ارسال کند. از این طریق آن‌ها می‌توانند مبلغ مشخص شده را به وسیله کیف پول بله خود پرداخت کنند.

برای ارسال پیام درخواست پول، لازم است توکن پرداخت کیف پولی مختص بازو را در فیلد provider_token متد sendInvoice قرار دهید. پس از پرداخت توسط کاربر، مبلغ پرداختی بلافاصله به کیف‌پول توسعه‌دهنده بازو واریز خواهد شد. این توکن را با مراجعه به @botfather برای بازوی خود ایجاد کنید. همچنین می‌توانید برای تست فرایند پرداخت، از توکن آزمایشی WALLET-TEST-1111111111111111 استفاده کنید که مانند توکن اصلی عمل می‌کند، تنها با این تفاوت که منجر به انتقال پول نمی‌شود.

تغییرات اخیر

قابلیت ارسال درخواست پول از نوع کارت به کارت که پیش‌تر در بازوها پشتیبانی می‌شد، به دلیل پایداری بیشتر و امکانات وسیع‌تر پرداخت کیف‌پولی حذف شده است. اکنون تنها روش رسمی و پایدار برای دریافت پول در بازوها، استفاده از کیف‌پول است.

در صورت وجود هرگونه مشکل یا پرسش، لطفاً از طریق بخش بازو در پشتیبانی بله موضوع را مطرح کنید.

کیف‌پول الکترونیکی
پلتفرم بازو سرویس کیف پول الکترونیکی را در اختیار توسعه‌دهندگان قرار می‌دهد؛ ابزاری امن، سریع و انعطاف‌پذیر برای مدیریت پرداخت‌های خرد و تراکنش‌های کاربران.

کیف‌پول‌ها در سه نوع شخصی، تجاری و سازمانی ارائه می‌شوند که هر کدام امکانات و شرایط ویژه خود را دارند تا متناسب با نیاز کسب‌وکار یا کاربر نهایی مورد استفاده قرار گیرند.

کیف‌پول الکترونیکی بهترین گزینه برای پرداخت‌های خرد است؛ چراکه برخلاف روش‌هایی مانند کارت‌به‌کارت، کاربران نیازی به وارد کردن شماره کارت و رمز دوم برای هر خرید خود ندارند. آن‌ها می‌توانند به‌سادگی موجودی خود را به کیف‌پول دیگران منتقل کنند، آن را برداشت کنند و پرداخت‌های روزانه مانند خرید شارژ، بسته اینترنت، پرداخت قبض، پاکت هدیه و سایر خدمات را از طریق آن انجام دهند.

امکانات ویژه برای توسعه‌دهندگان

با اتصال به API کیف پول، شما می‌توانید سرویس‌های مالی را در بازو یا مینی‌اپ خود پیاده‌سازی کنید و تجربه‌ای ساده و روان برای کاربران بسازید. امکانات کلیدی عبارت‌اند از:

سازگاری کامل با همه کارت‌های بانکی کاربران
سرویس استعلام تراکنش
سرویس‌های برگشت تراکنش‌
رسید خودکار تراکنش
امکان واریز و برداشت موجودی به صورت آنی
سرویس‌های تسهیم تراکنش
sendInvoice
بازوهای بله می توانند درخواست های پول را به عنوان صورتحساب خرید برای کاربران ارسال کنند و پرداخت های کاربران را دریافت کنند.

متد sendInvoice به منظور ارسال درخواست پول استفاده می‌شود. در صورت اجرای موفق، پیام ارسال‌شده را بر می‌گرداند.

پارامتر	نوع	الزام	توضیحات
chat_id	String یا Integer	الزامی	شناسه منحصربه‌فرد گفتگو هدف یا نام‌ کاربری کانال هدف (با فرمت @channelusername)
title	String	الزامی	نام محصول، بین ۱ تا ۳۲ کاراکتر
description	String	الزامی	توصیف محصول، بین ۱ تا ۲۵۵ کاراکتر
payload	String	الزامی	payload صورتحساب تعریف‌شده توسط بازو، بین ۱ تا ۱۲۸ بایت. این فیلد برای کاربر نمایش داده نمی‌شود. از آن برای فرآیندهای داخلی خود استفاده کنید.این مقدار پس از پرداخت موفق در آپدیت SuccessfulPayment بازگشت داده میشود و میتوان با استفاده از این مقدار، درخواست های پول را متمایز کرد.
provider_token	String	الزامی	توکن پرداخت کیف پولی که از @botfather دریافت کرده‌اید.
prices	آرایه‌ای از LabeledPrice	الزامی	صورت‌حساب خرید، یک لیست JSON-serialized از محصولات سفارش شامل عنوان کالا و قیمت محصول است که مجموع آنها به عنوان مبلغ نهایی در نظر گرفته می شود.
photo_url	String	اختیاری	URL تصویر محصول برای صورتحساب. یک تصویر از کالا را می توانید به عنوان تصویر درخواست پول ارسال کنید.وقتی افراد، چیزی را که برای آن هزینه می‌کنند، ببینند، حس بهتری خواهند داشت.
reply_to_message_id	Integer	اختیاری	شناسه پیام اصلی که بر روی آن پاسخ داده شده است.
createInvoiceLink
از طریق این متد یک شناسه پرداخت کیف‌پولی جدید برای استفاده در مینی‌اپ‌ها، ایجاد کنید. برای اطلاعات بیشتر، توضیحات openInvoice را در مستندات مینی‌اپ مطالعه کنید.

در صورت موفقیت، شناسه ایجادشده به‌صورت یک رشته بازگردانده می‌شود.

پارامتر	نوع	الزام	توضیحات
title	String	الزامی	نام محصول، بین ۱ تا ۳۲ کاراکتر
description	String	الزامی	توصیف محصول، بین ۱ تا ۲۵۵ کاراکتر
payload	String	الزامی	payload صورتحساب تعریف‌شده توسط بازو، بین ۱ تا ۱۲۸ بایت. این فیلد برای کاربر نمایش داده نمی‌شود. از آن برای فرآیندهای داخلی خود استفاده کنید.این مقدار پس از پرداخت موفق در آپدیت SuccessfulPayment بازگشت داده میشود و میتوان با استفاده از این مقدار، درخواست های پول را متمایز کرد.
provider_token	String	الزامی	توکن پرداخت کیف پولی که از @botfather دریافت کرده‌اید.
prices	آرایه‌ای از LabeledPrice	الزامی	صورت‌حساب خرید، یک لیست JSON-serialized از محصولات سفارش شامل عنوان کالا و قیمت محصول است که مجموع آنها به عنوان مبلغ نهایی در نظر گرفته می شود.
LabeledPrice
این شیء نشان‌دهنده بخشی از قیمت کالاها یا خدمات است.

پارامتر	نوع	توضیحات
label	String	برچسب خدمت یا کالا
amount	Integer	قیمت محصول در واحد ریال (عدد صحیح)
answerPreCheckoutQuery
پس از تأیید پرداخت توسط کاربر و دقیقاً پیش از نهایی شدن آن، به منظور گرفتن تأیید نهایی بازو یک آپدیت با فیلد pre_checkout_query به آن ارسال می‌شود. از این متد برای پاسخ به این درخواست و رد یا تأیید پرداخت، پیش از نهایی شدن آن استفاده کنید. در صورت موفق بودن این متد مقدار true برگردانده می‌شود.

نکته: بازو باید ظرف حداکثر ۱۰ ثانیه به آپدیت PreCheckoutQuery پاسخ دهد، در غیر این صورت پرداخت لغو خواهد شد.

پارامتر	نوع	الزام	توضیحات
pre_checkout_query_id	String	الزامی	شناسه یکتا مربوط به آپدیت PreCheckoutQuery
ok	Boolean	الزامی	مقدار true به این معناست که همه چیز مرتب است (اطلاعات پرداخت درست است، کالاها موجود هستند و ...) و بازو آماده ادامه پردازش سفارش است. در صورتی که مشکلی وجود دارد مقدار false برگردانید.
error_message	String	اختیاری	در صورتی که مقدار ok برابر با false باشد، این فیلد الزامی و حاوی پیام خطایی است که برای کاربر توضیح می‌دهد که چرا پرداخت امکان‌پذیر نیست (این پیام به کاربر نمایش داده خواهد شد).
PreCheckoutQuery
این شیء شامل اطلاعاتی درباره پرداخت است که بازو باید قبل از نهایی شدن، آن را مورد بررسی قرار دهد و با فراخوانی متد answerPreCheckoutQuery آن را رد یا تأیید کند. این شیء تنها برای پرداخت‌های کیف‌پولی ارسال می‌شود.

نکته: دریافت یک آپدیت حاوی این شیء به منزله نهایی شدن پرداخت نیست و تنها پس از دریافت پیامی حاوی شیء SuccessfulPayment می‌توان از موفقیت پرداخت مطمئن شد.

پارامتر	نوع	توضیحات
id	String	شناسه یکتا تراکنش
from	User	اطلاعات مربوط به فرد پرداخت‌کننده
currency	String	واحد قیمت. ریال (IRR)
total_amount	Integer	قیمت کل
invoice_payload	String	اطلاعات صورتحساب که در متد sendInvoice ارسال شده است.
SuccessfulPayment
این شیء شامل اطلاعات اولیه درباره یک پرداخت موفق است.

پارامتر	نوع	توضیحات
currency	String	واحد قیمت. ریال (IRR)
total_amount	Integer	قیمت کل
invoice_payload	String	اطلاعات صورتحساب که در متد sendInvoice ارسال شده است.
telegram_payment_charge_id	String	شناسه یکتای پرداخت. در پرداخت‌های کیف‌پولی معادل فیلد id در PreCheckoutQuery است.
provider_payment_charge_id	String	شماره پیگیری تراکنش در صورتی که پرداخت از طریق کیف پول بله بوده باشد.
inquireTransaction
با استفاده از متد inquireTransaction می‌توانید اطلاعات و وضعیت یک تراکنش خاص را با ارسال شناسه یکتای آن استعلام کنید. در صورت اجرای موفق، یک شی Transaction بر می‌گرداند.

پارامتر	نوع	توضیحات	الزام
transaction_id	String	شناسه یکتای تراکنش که برای استعلام استفاده می‌شود.	الزامی
این متد در کتابخانه‌های استاندارد ربات‌های تلگرام وجود ندارد. برای استفاده از آن، باید مستقیماً یک درخواست HTTP به سرور ارسال کنید.

Transaction
پارامتر	نوع	توضیحات
id	String	شناسه یکتای تراکنش.
status	String	نشان‌دهنده مرحله‌ای است که تراکنش در آن قرار دارد.
- pending: تراکنش در حال پردازش است.
- paid: تراکنش با موفقیت انجام شده است.
- failed: تراکنش ناموفق بوده است.
- rejected: تراکنش از سمت بازو رد شده است.
userID	Integer	شناسه یکتای کاربر پرداخت‌کننده.
amount	Integer	مبلغ تراکنش به واحد ریال (عدد صحیح).
createdAt	Integer	زمان ایجاد تراکنش (به‌صورت Unix timestamp یا فرمت مشابه).
آخرین به‌روزرسانی